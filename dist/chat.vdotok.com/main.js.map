{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/components/chat/add-group/add-group.component.ts","./src/app/components/chat/add-group/add-group.component.html","./src/app/components/chat/chat.component.ts","./src/app/components/chat/chat.component.html","./src/app/components/chat/new-chat/new-chat.component.ts","./src/app/components/chat/new-chat/new-chat.component.html","./src/app/components/login/login.component.ts","./src/app/components/login/login.component.html","./src/app/components/sign-up/sign-up.component.ts","./src/app/components/sign-up/sign-up.component.html","./src/app/shared/FormsHandler/FormsHandler.ts","./src/app/shared/FormsHandler/get-errors.component.ts","./src/app/shared/app-material/app-material.module.ts","./src/app/shared/auth/auth-guard.service.ts","./src/app/shared/auth/auth.service.ts","./src/app/shared/helpers/helpersFunctions.ts","./src/app/shared/pipe/filter.ts","./src/app/shared/pipe/safeurl.ts","./src/app/shared/services/base.service.ts","./src/app/shared/services/http.service.ts","./src/app/shared/services/pubsub.service.ts","./src/app/shared/services/storage.service.ts","./src/app/shared/services/websocket.service.ts","./src/app/shared/shared.module.ts","./src/app/shared/validators.ts","./src/constants/const.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { SignUpComponent } from './components/sign-up/sign-up.component';\r\nimport { AuthGuard } from './shared/auth/auth-guard.service';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: 'signup',\r\n    component: SignUpComponent\r\n  },\r\n  {\r\n    path: 'chat',\r\n    component: ChatComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  { path: '**', redirectTo: 'login' },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, {})],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  template: `<router-outlet></router-outlet>`\r\n})\r\nexport class AppComponent {\r\n  constructor() { }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { SignUpComponent } from './components/sign-up/sign-up.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { AppMaterialModule } from './shared/app-material/app-material.module';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { SharedModule } from './shared/shared.module';\r\nimport { AddGroupComponent } from './components/chat/add-group/add-group.component';\r\nimport { NewChatComponent } from './components/chat/new-chat/new-chat.component';\r\nimport { ToastrModule } from 'ngx-toastr';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    ChatComponent,\r\n    AddGroupComponent,\r\n    LoginComponent,\r\n    NewChatComponent,\r\n    SignUpComponent\r\n  ],\r\n  imports: [\r\n    SharedModule,\r\n    ReactiveFormsModule,\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    CommonModule,\r\n    BrowserAnimationsModule,\r\n    AppMaterialModule,\r\n    HttpClientModule,\r\n    ToastrModule.forRoot({\r\n      maxOpened: 1,\r\n      preventDuplicates: true\r\n    })\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from \"@angular/core\";\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from \"@angular/forms\";\r\nimport FormsHandler from \"src/app/shared/FormsHandler/FormsHandler\";\r\nimport { BaseService } from \"src/app/shared/services/base.service\";\r\nimport { PubsubService } from \"src/app/shared/services/pubsub.service\";\r\nimport { StorageService } from \"src/app/shared/services/storage.service\";\r\nimport { ToastrService } from \"ngx-toastr\";\r\nimport { fromEvent } from \"rxjs/internal/observable/fromEvent\";\r\nimport { map } from \"rxjs/internal/operators/map\";\r\nimport { debounceTime } from \"rxjs/internal/operators/debounceTime\";\r\nimport { distinctUntilChanged } from \"rxjs/internal/operators/distinctUntilChanged\";\r\nimport { mergeMap } from \"rxjs/internal/operators/mergeMap\";\r\nimport { startWith } from \"rxjs/operators\";\r\nimport { of } from \"rxjs\";\r\n\r\n@Component({\r\n  selector: \"add-group\",\r\n  templateUrl: \"./add-group.component.html\",\r\n  styleUrls: [\"./add-group.component.scss\"],\r\n})\r\nexport class AddGroupComponent implements OnInit {\r\n  currentUserName = StorageService.getAuthUsername();\r\n  currentUserData = StorageService.getUserData();\r\n  @Output() changeEvent = new EventEmitter<object>(); //<string>\r\n  form: FormGroup;\r\n  loading = true;\r\n  addGroupModel = false;\r\n  AllUsers = [];\r\n  activeChat: any = {\r\n    chatHistory: [],\r\n  };\r\n  message = \"\";\r\n  group_title = \"\";\r\n  groupnameError = \"\";\r\n  dialogRef;\r\n  selectedUsers = [];\r\n  CopyAllUsers = [];\r\n  u_users = [];\r\n  @ViewChild(\"searchInput\") searchInput: ElementRef;\r\n  @Output() setActiveChat = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    private svc: BaseService,\r\n    private toastr: ToastrService,\r\n    private _fb: FormBuilder,\r\n    private changeDetector: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.form = this._fb.group(\r\n      {\r\n        group_title: new FormControl(\"\", [\r\n          Validators.required,\r\n          Validators.maxLength(100),\r\n        ]),\r\n      },\r\n      { updateOn: \"change\" }\r\n    );\r\n\r\n    document.addEventListener(\"keyup\", (event) => {\r\n      if (event.code === \"Enter\" && !this.loading) {\r\n        this.addGroup();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.searchInput) {\r\n      fromEvent(this.searchInput.nativeElement, \"input\")\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(1000),\r\n          distinctUntilChanged(),\r\n          startWith(\"\"),\r\n          mergeMap((value) => {\r\n            this.loading = true;\r\n            if (!value) {\r\n              const data = {\r\n                sorting: \"ORDER BY full_name ASC\",\r\n                search_field: \"full_name\",\r\n                search_value: \"\",\r\n                condition: \"contains\",\r\n              };\r\n\r\n              return this.svc.post(\"AllUsers\", data).pipe(\r\n                map((res) => {\r\n                  console.log(\"**** Res of All users (group chat):\\n\\n\", res);\r\n                  this.u_users = res.users.filter(\r\n                    (u) => u.ref_id !== StorageService.getUserData().ref_id\r\n                  );\r\n\r\n                  if (!(this.u_users && this.u_users.length)) {\r\n                    this.u_users = [];\r\n                  }\r\n                  this.CopyAllUsers = [...this.u_users];\r\n                  return res;\r\n                })\r\n              );\r\n            }\r\n            const temparaay = [...this.CopyAllUsers];\r\n            const filteruser = temparaay.filter((user) => {\r\n              const searchValue = value.toLowerCase();\r\n              if (user.full_name.toLowerCase().startsWith(searchValue)) {\r\n                return -1;\r\n              }\r\n            });\r\n            const returnData = {\r\n              users: filteruser,\r\n            };\r\n            return of(returnData);\r\n          })\r\n        )\r\n        .subscribe((res) => {\r\n          this.loading = false;\r\n          this.u_users = res.users.filter(\r\n            (u) => u.ref_id !== StorageService.getUserData().ref_id\r\n          );\r\n          if (!this.u_users || !this.u_users.length) {\r\n            this.toastr.error(\"Opps!\", \"No contacts found\");\r\n            this.AllUsers = [];\r\n          } else {\r\n            this.AllUsers = this.u_users;\r\n          }\r\n          this.setAlreadySelected();\r\n        });\r\n    }\r\n  }\r\n\r\n  setAlreadySelected() {\r\n    this.selectedUsers.map((user) => {\r\n      const userIndex = this.AllUsers.find(\r\n        (alluser) => alluser.user_id == user.user_id\r\n      );\r\n      if (userIndex) userIndex[\"selected\"] = true;\r\n    });\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  selectContact(contact) {\r\n    this.groupnameError = \"\";\r\n    contact[\"selected\"] = !contact[\"selected\"];\r\n    this.changeDetector.detectChanges();\r\n    this.selectedUsers.push(contact);\r\n    this.selectedUsers = this.selectedUsers.filter((user) => user.selected);\r\n    this.selectedUsers = [...new Set(this.selectedUsers)];\r\n    if (!this.selectedUsers.length) {\r\n      this.groupnameError = \"Please Select Contacts\";\r\n    } else if (this.selectedUsers.length > 4) {\r\n      this.groupnameError = \"Participants cannot be more than 4\";\r\n    }\r\n    console.error(\"groupnameError\", this.groupnameError);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  openDialog(content): void {\r\n    this.groupnameError = \"\";\r\n    this.selectedUsers = this.selectedUsers.filter((user) => user.selected);\r\n    this.changeDetector.detectChanges();\r\n    if (!this.selectedUsers.length) {\r\n      this.groupnameError = \"Please Select Contacts\";\r\n      return;\r\n    } else if (this.selectedUsers.length > 4) {\r\n      this.groupnameError = \"Participants cannot be more than 4\";\r\n      return;\r\n    }\r\n    if (this.selectedUsers.length == 1) {\r\n      const useridArray = this.selectedUsers.map((user) => user.user_id);\r\n      const data = {\r\n        participants: useridArray,\r\n        auto_created: useridArray.length > 1 ? 0 : 1,\r\n        group_title: \"One to One chat\",\r\n      };\r\n      this.svc.post(\"CreateGroup\", data).subscribe((v) => {\r\n        this.changeDetector.detectChanges();\r\n        if (v && v.status == 200) {\r\n          this.groupnameError = \"\";\r\n          this.setActiveChat.emit(v.group);\r\n          this.form.reset();\r\n        }\r\n        this.selectedUsers = [];\r\n        this.changeDetector.detectChanges();\r\n        this.loading = false;\r\n        this.changeEvent.emit({ event: \"THREAD\", group: v.group });\r\n      });\r\n    } else {\r\n      this.addGroupModel = true;\r\n    }\r\n  }\r\n\r\n  //Called when user clicks on done button\r\n  addGroup() {\r\n    FormsHandler.validateForm(this.form);\r\n    const useridArray = this.selectedUsers.map((user) => user.user_id);\r\n    if (this.form.invalid || !useridArray.length || this.loading) return;\r\n    if (useridArray.length > 5) {\r\n      this.toastr.error(\"OPPS!\", \"participants Can not be more than 5!\");\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.changeDetector.detectChanges();\r\n    let data = {\r\n      participants: useridArray,\r\n      auto_created: useridArray.length > 1 ? 0 : 1,\r\n    };\r\n    data = {\r\n      ...data,\r\n      ...this.form.value,\r\n    };\r\n    this.svc.post(\"CreateGroup\", data).subscribe((v) => {\r\n      this.changeDetector.detectChanges();\r\n      if (v && v.status == 200) {\r\n        //ABM - M2M GROUP CASE:\r\n        let participants_ref_ids = [];\r\n        this.selectedUsers.map((p) => {\r\n          participants_ref_ids.push(p.ref_id);\r\n        });\r\n        //participants_ref_ids.push(StorageService.getUserData().ref_id);\r\n        const groupInfo = {\r\n          from: StorageService.getUserData().ref_id,\r\n          to: participants_ref_ids,\r\n          action: \"new\",\r\n          groupModel: v,\r\n        };\r\n        this.pubsubService.sendNotificationOnGroupUpdation(groupInfo);\r\n\r\n        //\r\n        this.changeEvent.emit({ event: \"THREAD\", group: v.group }); //added this because after creating m2m group, no group list is showing\r\n        //\r\n        this.groupnameError = \"\";\r\n        this.setActiveChat.emit(v.group);\r\n        this.toastr.success(\"Success!\", \"The group has been created!\");\r\n        this.closemodel();\r\n        this.form.reset();\r\n      }\r\n      this.selectedUsers = [];\r\n      this.changeDetector.detectChanges();\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  closemodel() {\r\n    this.selectedUsers = [];\r\n    this.addGroupModel = false;\r\n    this.AllUsers.forEach((element) => (element[\"selected\"] = false));\r\n    this.changeEvent.emit({ event: \"THREAD\", group: {} });\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  backScreen() {\r\n    console.log(\"backScreen  - addp-group\");\r\n\r\n    this.changeEvent.emit({ event: \"CHAT\", group: {} });\r\n  }\r\n}\r\n","<div class=\"newChatContainer\">\r\n  <div class=\"newChatHeader\">\r\n    <div class=\"newChatLeft hand\">\r\n      <img src=\"./assets/images/arrow-left.png\" class=\"arrowLeft hand\" (click)=\"backScreen()\" />\r\n      <p class=\"newChatHeading\">Create Group Chat</p>\r\n    </div>\r\n    <div class=\"newChatRight hand\" (click)=\"openDialog(content)\">\r\n      <img class=\"goodMark\" src=\"./assets/images/checkmark.png\" />\r\n    </div>\r\n  </div>\r\n  <div class=\"newChatSearchBox\">\r\n    <div class=\"input-group\">\r\n      <div class=\"input-group-prepend\">\r\n        <img src=\"./assets/images/search.png\" class=\"seacrchIcon\" />\r\n      </div>\r\n      <input type=\"text\" class=\"form-control\" placeholder=\"Search\" #searchInput />\r\n    </div>\r\n  </div>\r\n  <div class=\"newGrpChat\">\r\n    <p [ngClass]=\"groupnameError ? 'text-danger' :'cntct'\">\r\n      {{groupnameError ? groupnameError :'Select Contacts'}}\r\n    </p>\r\n  </div>\r\n  <div class=\"newListContainer max-height\">\r\n    <ng-container *ngFor=\"let user of AllUsers\">\r\n      <div class=\"contactListCard hand\" (click)=\"selectContact(user)\">\r\n        <div class=\"contactListCardLeft\">\r\n          <img src=\"./assets/images/user.png\" class=\"ListCardIcon\" />\r\n          <p class=\"ListCardName text-capitalize pb-1\">{{user.full_name}}</p>\r\n        </div>\r\n        <div class=\"selectuser contactListCardRight\" *ngIf=\"user['selected']\">\r\n          <img src=\"./assets/images/checkmark-circle.png\" class=\"ListCardButton\" />\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"addGroupModel\">\r\n  <div class=\"createChatPopup\">\r\n    <div class=\"chatPopupContent groupPopup\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Create a group chat</p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"closemodel()\" />\r\n      </div>\r\n      <div class=\"modalContent\">\r\n        <form [formGroup]=\"form\" class=\"w-100\" (submit)=\"addGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group chat</p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"form.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"addGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #content let-modal>\r\n  <div class=\"createChatPopup\">\r\n    <div class=\"chatPopupContent\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Create a group chat</p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"modal.dismiss('Cross click')\" />\r\n      </div>\r\n      <div class=\"modalContent\">\r\n        <form [formGroup]=\"form\" class=\"w-100\" (submit)=\"addGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group chat</p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"form.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"addGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</ng-template>","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n  EventEmitter,\r\n  Output,\r\n} from \"@angular/core\";\r\nimport { MatLegacyDialog as MatDialog } from \"@angular/material/legacy-dialog\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ToastrService } from \"ngx-toastr\";\r\nimport { fromEvent } from \"rxjs/internal/observable/fromEvent\";\r\nimport { debounceTime } from \"rxjs/internal/operators/debounceTime\";\r\nimport { distinctUntilChanged } from \"rxjs/internal/operators/distinctUntilChanged\";\r\nimport { map } from \"rxjs/internal/operators/map\";\r\nimport { FindArrayObject } from \"src/app/shared/helpers/helpersFunctions\";\r\nimport { BaseService } from \"src/app/shared/services/base.service\";\r\nimport { PubsubService } from \"src/app/shared/services/pubsub.service\";\r\nimport { StorageService } from \"src/app/shared/services/storage.service\";\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from \"@angular/forms\";\r\nimport FormsHandler from \"src/app/shared/FormsHandler/FormsHandler\";\r\nimport {\r\n  MessageModel,\r\n  onlineOfflineModel,\r\n  receiptModel,\r\n  typingModel,\r\n} from \"src/app/shared/models/chat\";\r\nimport axios from \"axios\";\r\nimport { environment } from \"src/environments/environment\";\r\n\r\n@Component({\r\n  selector: \"chat\",\r\n  templateUrl: \"./chat.component.html\",\r\n  styleUrls: [\"./chat.component.scss\"],\r\n})\r\nexport class ChatComponent implements OnInit {\r\n  @Output() setActiveChatt = new EventEmitter<string>();\r\n  @Output() changeEvent = new EventEmitter<string>();\r\n  editGroupModel = false;\r\n  groupForm: FormGroup;\r\n  loading = true;\r\n  AllGroups = [];\r\n  activeChat: any = {\r\n    chatHistory: [],\r\n  };\r\n  message = \"\";\r\n  currentUserName = StorageService.getAuthUsername();\r\n  currentUserData = StorageService.getUserData();\r\n  @ViewChild(\"messageInputElement\") messageInputElement: ElementRef;\r\n  threadType = \"THREAD\";\r\n  fileToSend: File = null;\r\n  isActiveThread = false;\r\n  popupimagesrc = \"\";\r\n  screen = \"CHAT\";\r\n  sdkconnected = false;\r\n  setToActive = null;\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    private svc: BaseService,\r\n    private router: Router,\r\n    private elRef: ElementRef,\r\n    public dialog: MatDialog,\r\n    private toastr: ToastrService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private _fb: FormBuilder\r\n  ) {\r\n    this.groupForm = this._fb.group(\r\n      {\r\n        group_id: new FormControl(\"\", [Validators.required]),\r\n        group_title: new FormControl(\"\", [\r\n          Validators.required,\r\n          Validators.maxLength(100),\r\n        ]),\r\n      },\r\n      { updateOn: \"change\" }\r\n    );\r\n    this.pubsubService.initConfigure();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.pubsubService.Client.on(\"connect\", (response) => {\r\n      console.log(\"*** on-connect response:\\n\", response);\r\n      this.sdkconnected = true;\r\n      if (!this.AllGroups.length) {\r\n        this.getAllGroups();\r\n      }\r\n    });\r\n    this.pubsubService.Client.on(\"register\", (response) => {\r\n      console.log(\"*** on-register response:\\n\", response);\r\n    });\r\n    this.pubsubService.Client.on(\"disconnect\", (response) => {\r\n      console.log(\"disconnect\", response);\r\n      this.sdkconnected = false;\r\n    });\r\n\r\n    document.addEventListener(\"keyup\", (event) => {\r\n      if (event.code === \"Enter\") {\r\n        this.sendTextMessage();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.pubsubService.Client.on(\"authentication_error\", (res: any) => {\r\n      console.log(\"authentication_error\", res);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"offline\", (response) => {\r\n      console.log(\"*** on-offline\", response);\r\n      this.setOfflineStatus(response);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"online\", (response: onlineOfflineModel) => {\r\n      console.log(\"*** on-online\", response);\r\n      this.setOnlineStatus(response);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"subscribed\", (response) => {\r\n      console.log(\"subscribed\", response);\r\n      this.setOnlineStatusforSubscribe(response);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"message\", (response) => {\r\n      response = JSON.parse(JSON.stringify(response));\r\n      console.log(\"**** on-message response: \\n\\n\", response);\r\n\r\n      //console.trace(\"new message\", response);\r\n      if (response.data) {\r\n        this.updateGroup(response);\r\n      }\r\n      if (response.type == \"text\" || response.type == \"ftp\" || response.type == \"file\" || response.type == \"image\" || response.type == \"audio\" ||response.type == \"video\")\r\n      {\r\n        //console.log(\"**** on-message response: \\n\\n\", response);\r\n\r\n\r\n        this.scroll();\r\n        const chatthread = this.findChatThread(response.to);\r\n\r\n        const isActiveThread = chatthread.id == this.activeChat.id;\r\n        chatthread[\"unReadCount\"] = isActiveThread? 0 : (chatthread[\"unReadCount\"] || 0) + 1;\r\n        response = this.messageBy(chatthread, response);\r\n        response[\"isRead\"] = isActiveThread;\r\n        response[\"auto_created\"] = chatthread[\"auto_created\"];\r\n        chatthread[\"lastMessage\"] = response.content;\r\n        chatthread[\"time\"] = new Date(response.id);\r\n        chatthread[\"type\"] = response.type;\r\n        if(response.subType) {\r\n          response[\"subType\"] = response.subType;\r\n          chatthread[\"subType\"] = response.subType;\r\n\r\n        }\r\n\r\n        //console.log(\"****asdfghjkjhgfds:\\n\", {response}, {chatthread});\r\n        \r\n\r\n\r\n        this.pushMessage(chatthread, response);\r\n        this.readSingleMessage(response, isActiveThread);\r\n        setTimeout(() => {\r\n          this.AllGroups.sort((a, b) => {\r\n            return a.id == chatthread.id ? -1 : 1;\r\n          });\r\n        }, 500);\r\n\r\n        this.changeDetector.detectChanges();\r\n      }\r\n\r\n      //---------------------------------//\r\n      else if (response.type == \"typing\") {\r\n        this.setUserTyping(response);\r\n      } else if (response.receiptType == 3) {\r\n        let chName = response.topic || response.to;\r\n        if (response.to != undefined) chName = response.to;\r\n        const chatthread = this.findChatThread(chName);\r\n        const message = FindArrayObject(\r\n          chatthread.chatHistory,\r\n          \"id\",\r\n          response.messageId\r\n        );\r\n        if (message) {\r\n          message[\"readCount\"] = (message[\"readCount\"] || 0) + 1;\r\n        }\r\n        this.changeDetector.detectChanges();\r\n      }\r\n    });\r\n\r\n    if (this.messageInputElement) {\r\n      fromEvent(this.messageInputElement.nativeElement, \"input\")\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(800), //3000 => changed this because 0 for typing goes after some seconds to the receiver\r\n          distinctUntilChanged()\r\n        )\r\n        .subscribe((data) => {\r\n          const sendMessage: MessageModel = {\r\n            type: \"typing\",\r\n            content: \"0\",\r\n            to: this.activeChat.channel_name,\r\n            key: this.activeChat.channel_key,\r\n            status: 0,\r\n            size: 0,\r\n            isGroupMessage: false,\r\n            from: StorageService.getAuthUsername(),\r\n            id: new Date().getTime().toString(),\r\n            date: new Date().getTime(),\r\n          };\r\n          this.pubsubService.sendMessage(sendMessage);\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  updateGroup(grp_info) {\r\n    let new_group = grp_info.data.groupModel.group;\r\n    console.log(\r\n      \"$$$$ in update group function \\n\\n\",\r\n      { grp_info },\r\n      { new_group }\r\n    );\r\n\r\n    // return;\r\n    if (grp_info.data.action == \"new\") {\r\n      let i = this.AllGroups.findIndex(\r\n        (grp) => grp.channel_name == new_group.channel_name\r\n      );\r\n\r\n      if (i === -1) {\r\n        let chat = grp_info.data.groupModel.group;\r\n        let subscribedata = {\r\n          key: chat.channel_key,\r\n          channel: chat.channel_name,\r\n        };\r\n        let data = [];\r\n        data.push(subscribedata);\r\n        this.pubsubService.subscribeToChat(data);\r\n        console.log(\"!!!!!! grp\", subscribedata);\r\n\r\n        //this.pubsubService.subscribeToChat(data);\r\n        if (chat[\"participants\"].length) {\r\n          chat[\"participants\"] = chat[\"participants\"].map((r) => {\r\n            r[\"username\"] = r[\"username\"] || r[\"full_name\"];\r\n            return r;\r\n          });\r\n        }\r\n\r\n\r\n        chat[\"chatTitle\"] = chat.auto_created\r\n          ? chat.group_title.split(\"-\")[0]//chat[\"participants\"][0][\"full_name\"]\r\n          : chat.group_title;\r\n\r\n\r\n\r\n        chat[\"Online\"] = false;\r\n        chat[\"key\"] = chat.channel_key;\r\n        chat[\"channel\"] = chat.channel_name;\r\n        chat[\"chatHistory\"] = [];\r\n        chat[\"TotalParticipants\"] = chat[\"participants\"].length;\r\n        chat[\"onlineParticipants\"] = 1;\r\n        chat[\"isSeen\"] = true;\r\n        console.log(\r\n          \"!!!mmmmmmmmmm final grp before pushing: \\n\\n\",\r\n          // this,\r\n          \"\\n\",\r\n          chat,\r\n          \"\\n\\n\",\r\n          // this.AllGroups\r\n        );\r\n\r\n        this.AllGroups.push(chat);\r\n        // this.setActiveChat(chat);\r\n        this.changeEvent.emit(\"THREAD\");\r\n        //chat.clicked_item = \"chat\";\r\n        this.setActiveChatt.emit(chat);\r\n        this.loading = false;\r\n\r\n        // console.log(\"** group added successfully\\n\", grp_info, \"\\n\");  //{new_group}, {index}, this.AllGroups\r\n      }\r\n    }\r\n\r\n    if (grp_info.data.action == \"delete\") {\r\n      //console.log(\"$$ group deleted successfully-before\\n\" , this.AllGroups);\r\n      // let cn = grp_info.data.groupModel;\r\n      let index = this.AllGroups.findIndex(\r\n        (grp) => grp.channel_name == new_group.channel_name\r\n      );\r\n      if (index > -1) {\r\n        this.AllGroups.splice(index, 1);\r\n        this.pubsubService.unsubscribeToChat({\r\n          key: new_group.channel_key,\r\n          channel: new_group.channel_name,\r\n        });\r\n        this.activeChat = {};\r\n        this.changeDetector.detectChanges();\r\n      }\r\n      console.log(\r\n        \"1234** group deleted successfully\\n\",\r\n        grp_info,\r\n        \"\\n\",\r\n        this.activeChat,\r\n        this.loading,\r\n        !this.activeChat.chatTitle && !this.loading\r\n      ); //{new_group}, {index}, this.AllGroups\r\n    }\r\n\r\n    if (grp_info.data.action == \"modify\") {\r\n      let grp_ind = this.AllGroups.findIndex(\r\n        (g) => g.channel_name === new_group.channel_name\r\n      );\r\n      // console.log(\"*** edit notification:\\n\", new_group, \"\\n\", this.AllGroups, \"\\n\");\r\n      if (grp_ind > -1) {\r\n        this.AllGroups[grp_ind].group_title = new_group.group_title;\r\n        this.AllGroups[grp_ind].chatTitle = new_group.group_title;\r\n        //console.log(\"*** edit notification:\\n\", new_group, \"\\n\", this.AllGroups, \"\\n\",new_group.group.group_title);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  editGroup() {\r\n    FormsHandler.validateForm(this.groupForm);\r\n    console.error(\"this.groupForm.\", this.groupForm.invalid);\r\n    if (this.groupForm.invalid || this.loading) return;\r\n    const playload = this.groupForm.value;\r\n    this.loading = true;\r\n    this.svc.post(\"RenameGroup\", playload).subscribe((v) => {\r\n      if (v && v.status == 200) {\r\n        //this.getAllGroups(); //Commented this on 22-May-23 because chat history removed when rename group called\r\n\r\n        if (\r\n          this.activeChat.group_id === playload.group_id &&\r\n          this.activeChat.auto_created === 0\r\n        ) {\r\n          console.log(\"&& rename group api calleds\", this.activeChat, playload);\r\n          this.activeChat.group_title = playload.group_title;\r\n          this.activeChat.chatTitle = playload.group_title;\r\n        }\r\n\r\n        //ABM\r\n        let participants_ref_ids = [];\r\n        v.group.participants.map((p) => {\r\n          participants_ref_ids.push(p.ref_id);\r\n        });\r\n        const groupInfo = {\r\n          from: StorageService.getUserData().ref_id,\r\n          to: participants_ref_ids,\r\n          action: \"modify\",\r\n          groupModel: v,\r\n        };\r\n        console.log(\r\n          \"TT *** edit grppp  -sending side:\\n\",\r\n          groupInfo,\r\n          \"/nAPI response:\",\r\n          v\r\n        );\r\n        this.pubsubService.sendNotificationOnGroupUpdation(groupInfo);\r\n        //ABM\r\n\r\n        this.editGroupModel = false;\r\n        this.loading = false;\r\n        this.toastr.success(\"The group has been updated!\", \"Success!\");\r\n      }\r\n    });\r\n  }\r\n  deleteGroup(group) {\r\n    this.loading = true;\r\n    const playload = {\r\n      group_id: group.id,\r\n    };\r\n    this.svc.post(\"DeleteGroup\", playload).subscribe((v) => {\r\n      this.changeDetector.detectChanges();\r\n      if (v && v.status == 200) {\r\n        this.loading = false;\r\n\r\n        let i = this.AllGroups.findIndex((g) => g.id === group.id);\r\n        this.AllGroups.splice(i, 1);\r\n        console.log(\"TTTT ** delete group: \", this.AllGroups, { group }, i);\r\n\r\n        //AMB\r\n        let participants_ref_ids = [];\r\n        group.participants.map((p) => {\r\n          participants_ref_ids.push(p.ref_id);\r\n        });\r\n        const groupInfo = {\r\n          from: StorageService.getUserData().ref_id,\r\n          to: participants_ref_ids,\r\n          action: \"delete\",\r\n          groupModel: v,\r\n        };\r\n        this.pubsubService.sendNotificationOnGroupUpdation(groupInfo);\r\n        //ABM\r\n\r\n        //this.getAllGroups(); //commented because all groups updated and chat removed\r\n        this.activeChat = {};\r\n        this.loading = false;\r\n        this.toastr.success(\"The group has been deleted!\", \"Success!\");\r\n      } else {\r\n        console.error(v.message);\r\n        alert(v.message);\r\n        this.changeDetector.detectChanges();\r\n      }\r\n    });\r\n  }\r\n  addNewGroupToAllGroup(group) {\r\n    this.setToActive = group.id; //jugaar\r\n    console.log(\r\n      \"aaaa - addNewGroupToAllGroup:  \",\r\n      group,\r\n      \"\\n\",\r\n      this.setToActive\r\n    );\r\n    let chat = group;\r\n    if (chat[\"participants\"].length) {\r\n      chat[\"participants\"] = chat[\"participants\"].map((r) => {\r\n        r[\"username\"] = r[\"username\"] || r[\"full_name\"];\r\n        return r;\r\n      });\r\n    }\r\n    chat[\"chatTitle\"] = chat.auto_created\r\n      ? chat.group_title.split(\"-\")[1]\r\n      : chat.group_title;\r\n    //chat.auto_created? chat[\"participants\"][0][\"full_name\"] : chat.group_title;\r\n    chat[\"Online\"] = false;\r\n    chat[\"key\"] = chat.channel_key;\r\n    chat[\"channel\"] = chat.channel_name;\r\n    chat[\"chatHistory\"] = [];\r\n    chat[\"TotalParticipants\"] = chat[\"participants\"].length;\r\n    chat[\"onlineParticipants\"] = 1;\r\n    chat[\"isSeen\"] = true;\r\n\r\n    this.AllGroups.push(chat);\r\n    console.log(\r\n      \"aaa allgroups:\\n\\n\",\r\n      this.AllGroups,\r\n      chat[\"participants\"][0][\"full_name\"]\r\n    );\r\n    //======================//\r\n    // **** Subscribing group ****:\r\n    let subscribedata = {\r\n      key: chat.channel_key,\r\n      channel: chat.channel_name,\r\n    };\r\n    let data = [];\r\n    data.push(subscribedata);\r\n    this.pubsubService.subscribeToChat(data);\r\n    // **** Subscribing group ****:\r\n    //======================//\r\n    if (!this.activeChat.chatTitle) {\r\n      this.activeChat = this.AllGroups.length ? this.AllGroups[\"0\"] : {};\r\n    }\r\n    if (this.setToActive) {\r\n      const indexchat = this.AllGroups.find(\r\n        (group) => group.id == this.setToActive\r\n      );\r\n      this.activeChat = indexchat ? indexchat : this.AllGroups[\"0\"];\r\n      this.setToActive = null;\r\n    }\r\n    this.isActiveThread = true;\r\n\r\n    setTimeout(() => {\r\n      this.sortThread();\r\n    }, 500);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  getAllGroups() {\r\n    this.loading = true;\r\n    this.svc.get(\"AllGroups\").subscribe((v) => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        this.AllGroups = v.groups.map((chat) => {\r\n          if (chat[\"participants\"].length) {\r\n            chat[\"participants\"] = chat[\"participants\"].map((r) => {\r\n              r[\"username\"] = r[\"username\"] || r[\"full_name\"];\r\n              return r;\r\n            });\r\n          }\r\n          chat[\"chatTitle\"] = chat.auto_created\r\n            ? chat[\"participants\"][0][\"full_name\"]\r\n            : chat.group_title;\r\n          chat[\"Online\"] = false;\r\n          chat[\"key\"] = chat.channel_key;\r\n          chat[\"channel\"] = chat.channel_name;\r\n          chat[\"chatHistory\"] = [];\r\n          chat[\"TotalParticipants\"] = chat[\"participants\"].length;\r\n          chat[\"onlineParticipants\"] = 1;\r\n          chat[\"isSeen\"] = true;\r\n          return chat;\r\n        });\r\n        console.log(\"this.activeChat.chatTitle\", this.activeChat);\r\n        if (!this.activeChat.chatTitle) {\r\n          this.activeChat = this.AllGroups.length ? this.AllGroups[\"0\"] : {};\r\n        }\r\n        if (this.setToActive) {\r\n          const indexchat = this.AllGroups.find(\r\n            (group) => group.id == this.setToActive\r\n          );\r\n          this.activeChat = indexchat ? indexchat : this.AllGroups[\"0\"];\r\n          this.setToActive = null;\r\n        }\r\n        this.isActiveThread = true;\r\n        this.pubsubService.subscribeToChat(this.AllGroups);\r\n      }\r\n      setTimeout(() => {\r\n        this.sortThread();\r\n      }, 500);\r\n      this.changeDetector.detectChanges();\r\n    });\r\n  }\r\n\r\n  /* ======================================================================================================================= */\r\n  changeSidebar($event) {\r\n    this.threadType = $event.event;\r\n    console.log(\"changeSidebar:  \", $event);\r\n\r\n    if (this.threadType == \"THREAD\") {\r\n      this.addNewGroupToAllGroup($event.group);\r\n      //this.getAllGroups(); //commented on 24-May-23 because all chat removed\r\n    }\r\n  }\r\n  setActiveChat(group) {\r\n    console.log(\"aaaa - setActiveChat:  , \", group);\r\n\r\n    this.isActiveThread = group.id == this.activeChat.id;\r\n    if (!this.isActiveThread) this.message = \"\";\r\n    this.activeChat = group;\r\n    group[\"unReadCount\"] = 0;\r\n    this.screen = \"MSG\";\r\n    this.scroll();\r\n    group.chatHistory = group.chatHistory || [];\r\n    this.readsendMessage(group.chatHistory);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  //Called when group created:\r\n  setchat(chat) {\r\n    console.log(\"**** aaaa - setChat: \", chat);\r\n\r\n    this.setToActive = chat.id; //chat.id\r\n    this.addNewGroupToAllGroup(chat);\r\n  }\r\n\r\n  openModal(group) {\r\n    if (group.auto_created) {\r\n      alert(\"Can not change One to one group title\");\r\n      return;\r\n    }\r\n    group[\"group_id\"] = group.id;\r\n    this.groupForm.reset(group);\r\n    this.editGroupModel = true;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  checkFileType(content: any) {\r\n    let preview = content.includes(\"txt\")  //text/plain\r\n      ? \"./assets/images/txt.png\"\r\n      : content.includes(\"pdf\")\r\n      ? \"./assets/images/pdf.png\"\r\n      : content.includes(\"json\")\r\n      ? \"./assets/images/json.png\"\r\n      : \"./assets/images/Document.png\"//\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Icon-doc.svg/810px-Icon-doc.svg.png\";\r\n\r\n\r\n    //if (content.includes(\"video/\")) preview = \"./assets/images/video.png\";\r\n    //if (content.includes(\"audio/\")) preview = \"./assets/images/audio.png\";\r\n    //console.log(\"**** file preview: \", content, \"\\n\", preview);\r\n    \r\n    return preview;\r\n  }\r\n  fileType(content: any) {\r\n    return content.split(\";\")[0].split(\":\")[1];\r\n  }\r\n  findChatThread(channel) {\r\n    return FindArrayObject(this.AllGroups, \"channel_name\", channel);\r\n  }\r\n  readSingleMessage(response, isActiveThread) {\r\n    if (response.from == this.currentUserName || !isActiveThread) return;\r\n    const chatobj: receiptModel = {\r\n      messageId: response.id,\r\n      receiptType: 3,\r\n      from: StorageService.getAuthUsername(),\r\n      key: response.key,\r\n      to: response.to,\r\n      date: new Date().getTime(),\r\n    };\r\n    this.pubsubService.readSingleMessage(chatobj);\r\n  }\r\n  readsendMessage(chatHistory) {\r\n    const unreadchatHistory = chatHistory\r\n      .filter((chat) => !chat.isRead)\r\n      .map((chat) => {\r\n        const chatobj: receiptModel = {\r\n          receiptType: 3,\r\n          messageId: chat.id,\r\n          from: StorageService.getAuthUsername(),\r\n          key: chat.key,\r\n          to: chat.to,\r\n          date: new Date().getTime(),\r\n        };\r\n        return chatobj;\r\n      });\r\n    if (unreadchatHistory.length)\r\n      this.pubsubService.readMessage(unreadchatHistory);\r\n    chatHistory = chatHistory.map((chat) => {\r\n      chat.isRead = true;\r\n      return chat;\r\n    });\r\n  }\r\n  handleFileInput(files: FileList) {\r\n    this.fileToSend = files.item(0);\r\n  }\r\n  invalidSize() {\r\n    return this.fileToSend.size / 1024 > 6144;\r\n  }\r\n  removeAttachment() {\r\n    this.fileToSend = null;\r\n  }\r\n\r\n\r\n\r\n  sendTextMessage() {\r\n    if (!/\\S/.test(this.message) && !this.fileToSend) {\r\n      return;\r\n    } else if (this.message.length > 400) {\r\n      this.toastr.error(\"Message can not be more than 400 characters\", \"Opps!\");\r\n      return;\r\n    } else if (this.fileToSend && this.invalidSize()) {\r\n      this.toastr.error(\"The maximum size of file should be 6MBs.\", \"Opps!\");\r\n      this.fileToSend = null;\r\n      return;\r\n    }\r\n    this.scroll();\r\n    if (!this.message && !this.fileToSend) return;\r\n\r\n\r\n    // ************ Sending file here ************ : \r\n    if (this.fileToSend) {\r\n      //------- Changing File Sharing Procedure to FTP -------//\r\n      let formData = new FormData(); // Currently empty\r\n      let ext = this.getExtension(this.fileToSend.name);\r\n      let subtype = this.getFileType(this.fileToSend);\r\n      let sizeOfFile = this.fileToSend.size;\r\n\r\n\r\n      formData.append(\"type\", \"ftp\");\r\n      formData.append(\"uploadFile\", this.fileToSend);\r\n      formData.append(\"auth_token\", this.currentUserData.auth_token);\r\n      formData.append(\"request_type\", \"web\");\r\n      formData.append(\"extension\", ext);\r\n\r\n\r\n    \r\n      // subtype = this.getFileType(this.fileToSend);\r\n      // sizeOfFile = this.fileToSend.size;\r\n      console.log(\"**** Name of the selected file:    \", this.fileToSend.name,\"\\n\\nFile:  \",this.fileToSend.size, \"\\n\\nSubType:     \", subtype, \"\\n\\nExtention:     \", ext);\r\n\r\n      \r\n      axios\r\n        .post(`${environment.apiBaseUrl}s3upload/`, formData)\r\n        .then((response: any) => {\r\n          if (response.data.status === 200) {\r\n            const option = {\r\n              type: \"ftp\",\r\n              content: response.data.file_name,\r\n              to: this.activeChat.channel_name,\r\n              key: this.activeChat.channel_key,\r\n              subType: subtype, //0\r\n              id: new Date().getTime().toString(),\r\n              from: StorageService.getAuthUsername(),\r\n              topic: this.activeChat.channel_name,\r\n              date: new Date().getTime(),\r\n              status: 1,\r\n              isGroupMessage: false,\r\n              size: sizeOfFile,//0,\r\n\r\n            };\r\n            console.log(\"**** OPTIONS:  \\n\\n\", option);\r\n\r\n            this.pubsubService.sendMessage(option);\r\n          }\r\n        });\r\n      this.fileToSend = null;\r\n      //------- Changing File Sharing Procedure to FTP -------//\r\n\r\n      return;\r\n      // this.pubsubService.Client.SendFile(this.fileToSend, option);\r\n    }\r\n    if (!this.message) return;\r\n    const sendMessage: MessageModel = {\r\n      type: \"text\",\r\n      content: this.message,\r\n      to: this.activeChat.channel_name,\r\n      key: this.activeChat.channel_key,\r\n      status: 1,\r\n      size: 0,\r\n      isGroupMessage: false,\r\n      from: StorageService.getAuthUsername(),\r\n      id: new Date().getTime().toString(),\r\n      date: new Date().getTime(),\r\n    };\r\n    this.pubsubService.sendMessage(sendMessage);\r\n    this.message = \"\";\r\n    this.scroll();\r\n    if (\r\n      !(this.AllGroups.length && this.activeChat.id == this.AllGroups[0].id)\r\n    ) {\r\n      this.sortThread();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getExtension(filename) {\r\n    return filename.split(\".\").pop();\r\n  }\r\n  getFileType(fileR) {\r\n    //All cross platforms following these ENUMS:\r\n    // int image = 0;\r\n    // int audio = 1;\r\n    // int video = 2; \r\n    // int file = 3; \r\n    let type = 3; //\"file\";\r\n    const filetype = fileR.type;\r\n    // console.log(\"*** file type\", fileR, filetype);\r\n    if (filetype.includes(\"image\")) type = 0;//\"image\";\r\n    else if (filetype.includes(\"audio\")) type = 1;//\"audio\";\r\n    else if (filetype.includes(\"video\")) type = 2//\"video\";\r\n    return type;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  typingmessage($event) {\r\n    if ($event.key === \"Enter\") {\r\n      this.sendTextMessage();\r\n      return;\r\n    }\r\n    const sendMessage: MessageModel = {\r\n      type: \"typing\",\r\n      content: \"1\",\r\n      to: this.activeChat.channel_name,\r\n      key: this.activeChat.channel_key,\r\n      status: 0,\r\n      size: 0,\r\n      isGroupMessage: false,\r\n      from: StorageService.getAuthUsername(),\r\n      id: new Date().getTime().toString(),\r\n      date: new Date().getTime(),\r\n    };\r\n    this.pubsubService.sendMessage(sendMessage);\r\n  }\r\n\r\n  setOnlineStatusforSubscribe(response: onlineOfflineModel) {\r\n    const indexchat = this.findChatThread(response.channel);\r\n    if (indexchat) {\r\n      const onlineNumbers = [...new Set(response.who.map((n) => n.username))];\r\n      indexchat[\"onlineParticipants\"] =\r\n        (onlineNumbers && onlineNumbers.length) || 1;\r\n      if (indexchat && indexchat.auto_created)\r\n        indexchat[\"Online\"] = onlineNumbers.length > 1;\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  setOnlineStatus(response: onlineOfflineModel) {\r\n    const indexchat = this.findChatThread(response.channel);\r\n    if (!indexchat) return;\r\n    if (indexchat.auto_created) indexchat[\"Online\"] = true;\r\n    if (!indexchat.auto_created) {\r\n      indexchat[\"onlineParticipants\"] =\r\n        indexchat[\"onlineParticipants\"] < indexchat[\"TotalParticipants\"]\r\n          ? indexchat[\"onlineParticipants\"] + 1\r\n          : indexchat[\"onlineParticipants\"];\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  setOfflineStatus(response: onlineOfflineModel) {\r\n    const indexchat = this.findChatThread(response.channel);\r\n    if (indexchat && indexchat.auto_created) indexchat[\"Online\"] = false;\r\n    if (!indexchat.auto_created) {\r\n      indexchat[\"onlineParticipants\"] =\r\n        indexchat[\"onlineParticipants\"] > 2\r\n          ? indexchat[\"onlineParticipants\"] - 1\r\n          : 1;\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  setUserTyping(response: typingModel) {\r\n    if (response.from == this.currentUserData.ref_id) return;\r\n    const indexchat = FindArrayObject(\r\n      this.AllGroups,\r\n      \"channel_name\",\r\n      response.to\r\n    );\r\n    const typinguser = indexchat[\"participants\"].find(\r\n      (e) => e.ref_id == response.from\r\n    );\r\n    if (response.content == \"1\") {\r\n      indexchat[\"TypingUserList\"] = indexchat[\"TypingUserList\"] || [];\r\n      indexchat[\"TypingUserList\"] = [...new Set([typinguser])];\r\n    } else if (response.content == \"0\") {\r\n      indexchat[\"TypingUserList\"] = indexchat[\"TypingUserList\"].filter(\r\n        (e) => e.ref_id != response.from\r\n      );\r\n    }\r\n    indexchat[\"userTyping\"] =\r\n      indexchat[\"TypingUserList\"].length && response.content != \"0\";\r\n    const nameList = indexchat[\"TypingUserList\"].map(\r\n      (userObj) => userObj.full_name\r\n    );\r\n    if (nameList.length == 1) {\r\n      indexchat[\"userTypingContent\"] = nameList + \" \" + \"is typing...\";\r\n    } else if (nameList.length == 2) {\r\n      indexchat[\"userTypingContent\"] = nameList.join() + \" \" + \"are typing...\";\r\n    } else if (nameList.length > 2) {\r\n      indexchat[\"userTypingContent\"] =\r\n        nameList.filter((i, j) => j < 2).join() +\r\n        \" \" +\r\n        \"and other are typing...\";\r\n    }\r\n    // if (indexchat && indexchat.auto_created) {\r\n    //   indexchat['userTyping'] = response.content != '0' && response.from != this.currentUserData.ref_id;\r\n    //   indexchat['userTypingContent'] = (response.content == '1') ? sender + \" is typing...\" : \"\";\r\n    // } else if (indexchat && !indexchat.auto_created) {\r\n    //   this.setMultiUserTyping(response, typinguser, indexchat);\r\n    // }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  setMultiUserTyping(response, typinguser, indexchat) {\r\n    if (response.content == \"1\") {\r\n      indexchat[\"TypingUserList\"] = [...new Set(typinguser)];\r\n    } else if (response.content == \"0\") {\r\n      indexchat[\"TypingUserList\"] = indexchat[\"TypingUserList\"].filter(\r\n        (e) => e.ref_id != response.from\r\n      );\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  scroll(): void {\r\n    setTimeout(() => {\r\n      this.elRef.nativeElement.querySelector(\".messagesBox\").scrollTop =\r\n        this.elRef.nativeElement.querySelector(\".messagesBox\").scrollHeight;\r\n    }, 500);\r\n  }\r\n  newChat() {\r\n    this.threadType = \"CHAT\";\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  logout() {\r\n    this.pubsubService.Disconnect();\r\n    StorageService.clearLocalStorge();\r\n    this.router.navigate([\"login\"]);\r\n  }\r\n  sortThread() {\r\n    if (this.activeChat.id) {\r\n      this.AllGroups.sort((a, b) => {\r\n        return a.id == this.activeChat.id ? -1 : 1;\r\n      });\r\n    }\r\n  }\r\n  messageBy(chatthread, response) {\r\n    if (this.isShowName(chatthread, response)) {\r\n      const messageByObj = FindArrayObject(\r\n        chatthread.participants,\r\n        \"ref_id\",\r\n        response.from\r\n      );\r\n      response[\"messageBy\"] = (messageByObj && messageByObj.full_name) || \"\";\r\n    }\r\n    return response;\r\n  }\r\n  isShowName(chatthread, response) {\r\n    if (chatthread[\"chatHistory\"].length && response.from) {\r\n      const previourmessage =\r\n        chatthread[\"chatHistory\"][chatthread[\"chatHistory\"].length - 1];\r\n      return previourmessage.from != response.from;\r\n    }\r\n    return true;\r\n  }\r\n  pushMessage(thread, response) {\r\n    let newResponse = {};\r\n    newResponse = JSON.parse(JSON.stringify(response));\r\n    if (response.type == \"text\" || response.content) {\r\n      //!response.content\r\n      thread[\"chatHistory\"].push(newResponse);\r\n    } else {\r\n      const foundIndex = thread.chatHistory.findIndex(\r\n        (x) => x.id == response.id\r\n      );\r\n      thread.chatHistory[foundIndex] = response;\r\n    }\r\n  }\r\n  getLastMessage(group): string {\r\n    const isactivethread = group.id == this.activeChat.id;\r\n    if (!isactivethread && group.unReadCount) {\r\n      return \"Misread messages\";\r\n    } else if (group.type === \"ftp\") {\r\n      return \"File\";\r\n    }\r\n    //Commented due to change of file sharing method ftp:=\r\n    // else if (group.type != \"text\") {\r\n    //   return group.type;\r\n    // }\r\n    return group.lastMessage;\r\n  }\r\n  openImage(imagesrc): void {\r\n    this.popupimagesrc = imagesrc;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  closeImage() {\r\n    this.popupimagesrc = null;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  closeModal() {\r\n    this.editGroupModel = false;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  isHideThread() {\r\n    return this.isMobile() ? this.screen != \"CHAT\" : false;\r\n  }\r\n  isHideChatScreen() {\r\n    return this.isMobile() ? this.screen != \"MSG\" : false;\r\n  }\r\n  backScreen() {\r\n    this.threadType = \"THREAD\";\r\n    this.screen = \"CHAT\";\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  isMobile() {\r\n    return window.innerWidth < 768;\r\n  }\r\n}\r\n","<div class=\"row dashboardContainer\">\r\n  <!-- popup end -->\r\n  <div class=\"col-sm-4 leftSide\" [hidden]=\"isHideThread()\">\r\n    <div class=\"leftSideHeader\">\r\n      <img src=\"./assets/images/logo2.png\" class=\"dashboardLogo\" />\r\n    </div>\r\n    <div class=\"leftSideListContainer\">\r\n\r\n      <ng-container *ngIf=\"threadType === 'THREAD'\">\r\n        <div style=\"align-items: center; margin:0px\" class=\"leftSectionHeader\">\r\n          <h4 class=\"leftHeading\">CHATROOMS</h4>\r\n          <h4 class=\"createText\" (click)=\"newChat()\">Create +</h4>\r\n        </div>\r\n        <!-- empty chats section start-->\r\n        <div class=\"leftSectionEmptyContainer\" *ngIf=\"!AllGroups.length && !loading\">\r\n          <p class=\"noAvailableText\">No Available ChatRoom</p>\r\n          <p class=\"tapText\">Tap and hold on any message to star it, so you can easily find it later.</p>\r\n        </div>\r\n        <!-- empty chats section end-->\r\n\r\n        <div class=\"listingContainer fullHeight\">\r\n          <div class=\"chatListContainer noHorizontalPadding\">\r\n            <ng-container *ngFor=\"let group of AllGroups\">\r\n              <div class=\"chatsCardContainer hand\" (click)=\"setActiveChat(group)\">\r\n                <div class=\"chatsCardLeft\" >\r\n                  <div class=\"chatsNameWrap\">\r\n                    <p class=\"chatName text-capitalize\">{{group.chatTitle}}</p>\r\n                    <span class=\"unreadBadge\" *ngIf=\"group.unReadCount\"> {{group.unReadCount}}</span>\r\n                  </div>\r\n                  <p class=\"misreadMsg\" *ngIf=\"group.userTyping\">{{group?.userTypingContent}}</p>\r\n\r\n                  <p class=\"misreadMsg text-capitalize\" *ngIf=\"!group.userTyping\"\r\n                    [ngClass]=\"group.unReadCount ? 'misreadMsg':'readMsg'\">\r\n                    {{ getLastMessage(group) }}\r\n                  </p>\r\n\r\n                </div>\r\n                <div class=\"chatsCardRight mr-1\">\r\n                  <div class=\"dropdown mt-1\" style=\"align-self: flex-end\">\r\n                    <img src=\"./assets/images/more.png\" class=\"moreIcon\" />\r\n                    <div class=\"dropdown-content\">\r\n                      <a class=\"edit\" (click)=\"openModal(group)\">EDIT GROUP NAME</a>\r\n                      <a class=\"delete\" (click)=\"deleteGroup(group)\">DELETE</a>\r\n                    </div>\r\n                  </div>\r\n                  <p [ngClass]=\"group.Online ? 'cardOnlineStatus' :'cardOfflineStatus'\" *ngIf=\"group.auto_created\">\r\n                    {{group.Online\r\n                    ?\r\n                    'Online' :'Offline'}}\r\n                  </p>\r\n                  <p class=\"cardOnlineStatus\" *ngIf=\"!group.auto_created\">\r\n                    {{ group.onlineParticipants + '/' + group.TotalParticipants }} Online\r\n\r\n                  </p>\r\n\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"threadType === 'GROUP'\">\r\n        <add-group (setActiveChat)=\"setchat($event)\" (changeEvent)=\"changeSidebar($event)\"></add-group>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"threadType === 'CHAT'\">\r\n        <new-chat (setActiveChat)=\"setchat($event)\" (changeEvent)=\"changeSidebar($event)\"></new-chat>\r\n      </ng-container>\r\n\r\n\r\n    </div>\r\n    <div class=\"leftSideFooter\">\r\n      <div class=\"logoutContainer\" (click)=\"logout()\">\r\n        <img src=\"./assets/images/log-out.png\" class=\"logoutLogo\" />\r\n        <span class=\"logoutText\">LOG OUT {{currentUserData.full_name}}</span>\r\n        <span class=\"ml-1\" [ngClass]=\"sdkconnected ? 'online' :'offline' \"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-sm-8 rightSide\" [hidden]=\"isHideChatScreen()\">\r\n    <div class=\"rightSideHeader alignBottom chatholder\">\r\n      <div style=\"display: flex;flex-direction: row;align-items: center\">\r\n        <img src=\"./assets/images/arrow-left.png\" class=\"arrowLeft hand\" (click)=\"backScreen()\" *ngIf=\"isMobile()\" />\r\n        <p class=\"roomNameText text-capitalize\" *ngIf=\"activeChat.chatTitle\">{{activeChat.chatTitle}}\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- right side starts -->\r\n    <div class=\"messagesBox\">\r\n      <ng-container *ngIf=\"activeChat.chatTitle\">\r\n        <ng-container *ngFor=\"let chat of activeChat['chatHistory']\">\r\n          <div [ngClass]=\"chat.from == currentUserName ? 'senderChatContainer' :'receiverChatContainer'\">\r\n\r\n            <h4 class=\"msgBy text-capitalize\" *ngIf=\"chat.from != currentUserName\">{{chat.messageBy}}</h4>\r\n            <!-- first messgae from same person -->\r\n            <div class=\"bubbleContainer\">\r\n\r\n              <!-- FOR TEXT MSG -->\r\n              <div class=\"bubble\" *ngIf=\"chat.type ==='text'\">\r\n                <p class=\"msgText\">{{chat.content}}</p>\r\n              </div>\r\n\r\n\r\n\r\n\r\n            \r\n\r\n\r\n\r\n\r\n              <div *ngIf=\"!chat.content && chat.type ==='ftp'\" >\r\n                <mat-spinner [diameter]=\"50\" *ngIf=\"!chat.content\"></mat-spinner>\r\n              </div>\r\n\r\n\r\n\r\n              <div *ngIf=\"chat.type !=='text' && chat.type ==='ftp'\" class=\"imgbubble file-attachment\" >\r\n                <mat-spinner [diameter]=\"50\" *ngIf=\"!chat.content\"></mat-spinner>\r\n\r\n\r\n                <ng-container *ngIf=\"chat.content\">\r\n\r\n                  <img *ngIf=\"chat.subType == 0\" [src]=\"chat.content\" style=\"width: 220px; height: 120px;\"/>\r\n\r\n\r\n                  <audio *ngIf=\"chat.subType == 1\" controls=\"true\">\r\n                    <source [src]=\"chat.content\">\r\n                  </audio> \r\n\r\n\r\n                  <video *ngIf=\"chat.subType == 2\" controls=\"true\" style=\"width: 220px; height: 120px;\">\r\n                    <source [src]=\"chat.content\">\r\n                  </video>\r\n\r\n                  \r\n                  <img *ngIf=\"chat.subType == 3\" [src]=\"checkFileType(chat.content)\" class=\"w-100 msgImage thumbnail img-fluid\" />\r\n\r\n\r\n                  <a [href]=\"chat.content | safeUrl\" download>Download</a>\r\n                </ng-container>\r\n              </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n              <span class=\"time\">\r\n                <ng-container *ngIf=\"chat.readCount && chat.from == currentUserName\">\r\n                   Read\r\n                  <br />\r\n                </ng-container>\r\n                <span> {{chat.date | date:\"shortTime\"}} </span>\r\n              </span>\r\n            </div>\r\n\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <div class=\"chatRoomContainer\" *ngIf=\"!activeChat.chatTitle && !loading\">\r\n        <div style=\"height: 100%;\" class=\"listingContainer\">\r\n          <!-- empty list container start -->\r\n          <div class=\"emptyListContainer\">\r\n            <div class=\"emptyListTop\">\r\n              <div></div>\r\n              <img src=\"./assets/images/shipping.png\" class=\"shippingIcon\" />\r\n              <div class=\"noConvoTextWrapper\">\r\n                <p class=\"noConvoText\">No Conversation Yet</p>\r\n                <p style=\"max-width: 200px;\" class=\"noConvoSub\">\r\n                  Tap and hold on any message to star it, so you can easily find\r\n                  it later.\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div class=\"emptyListBottom\">\r\n              <button type=\"submit\" class=\"btn newChatButton\" (click)=\"newChat()\">\r\n                NEW CHAT\r\n              </button>\r\n              <button type=\"submit\" class=\"btn refreshButton\" (click)=\"getAllGroups()\">\r\n                REFRESH\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <!-- empty list container end -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"sendInputContainer\" [hidden]=\"!activeChat.chatTitle\">\r\n      <div class=\"sendInputWrapper\">\r\n\r\n        <ng-container *ngIf=\"fileToSend\">\r\n          <div class=\"w-100\">\r\n            <img src=\"./assets/images/Document.png\" class=\"attachmentItemIcon ml-4\" />\r\n            <span class=\"ml-2\">{{fileToSend.name}}</span>\r\n            <span class=\"font-weight-bolder hand ml-2 text-danger\" (click)=\"removeAttachment()\">X</span>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <input #messageInputElement type=\"text\" class=\"form-control\" placeholder=\"Type to reply..\"\r\n          (keyup)=\"typingmessage($event)\" [(ngModel)]=\"message\" *ngIf=\"!fileToSend\" />\r\n\r\n        <div class=\"sendInputButtonContainer dropup \" style=\"border-right: 1px solid #ebedf4\">\r\n          <img src=\"./assets/images/attachment.png\" data-toggle=\"dropdown\" class=\"sendIcon dropdown-toggle\" />\r\n          <div class=\"attachmentpopup dropdown-menu dropdown-menu-right selectOptionContainer\">\r\n            <div class=\"attachmentPopHeader mx-3\">\r\n              <p class=\"attachmentHeading\">ADD ATTACHMENT</p>\r\n              <p class=\"attachmentHeading\">X</p>\r\n            </div>\r\n            <div class=\"attachmentPopContent\" (click)=\"fileuploader.click()\">\r\n              <div class=\"attachmentTool\">\r\n                <div class=\"attachmentToolIcon\">\r\n                  <img src=\"./assets/images/Document.png\" class=\"attachmentItemIcon\" />\r\n                </div>\r\n                <input #fileuploader class=\"d-none\" type=\"file\" id=\"fileinput\"\r\n                  (change)=\"handleFileInput($event.target.files)\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sendInputButtonContainer\" (click)=\"sendTextMessage()\">\r\n          <img src=\"./assets/images/send.png\" class=\"sendIcon\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- The Modal -->\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"popupimagesrc\">\r\n  <span class=\"close\" (click)=\"closeImage()\">&times;</span>\r\n  <img class=\"modal-content\" id=\"img01\" [src]=\"popupimagesrc | safeUrl\">\r\n</div>\r\n\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"editGroupModel\">\r\n  <div class=\"createChatPopup \">\r\n    <div class=\"chatPopupContent groupPopup\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Edit group </p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"closeModal()\" />\r\n      </div>\r\n      <div class=\" modalContent\">\r\n        <form [formGroup]=\"groupForm\" class=\"w-100\" (submit)=\"editGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group </p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"groupForm.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"editGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>","import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from \"@angular/core\";\r\nimport { MatLegacyDialog as MatDialog } from \"@angular/material/legacy-dialog\";\r\nimport { fromEvent } from \"rxjs/internal/observable/fromEvent\";\r\nimport { debounceTime } from \"rxjs/internal/operators/debounceTime\";\r\nimport { distinctUntilChanged } from \"rxjs/internal/operators/distinctUntilChanged\";\r\nimport { map } from \"rxjs/internal/operators/map\";\r\nimport { mergeMap } from \"rxjs/internal/operators/mergeMap\";\r\nimport { BaseService } from \"src/app/shared/services/base.service\";\r\nimport { PubsubService } from \"src/app/shared/services/pubsub.service\";\r\nimport { StorageService } from \"../../../shared/services/storage.service\";\r\n\r\nimport { ToastrService } from \"ngx-toastr\";\r\nimport { startWith } from \"rxjs/operators\";\r\nimport { of } from \"rxjs\";\r\n\r\n@Component({\r\n  selector: \"new-chat\",\r\n  templateUrl: \"./new-chat.component.html\",\r\n  styleUrls: [\"./new-chat.component.scss\"],\r\n})\r\nexport class NewChatComponent implements OnInit {\r\n  loading = true;\r\n  AllUsers = [];\r\n  CopyAllUsers = [];\r\n  u_users = [];\r\n  @Output() changeEvent = new EventEmitter<object>(); //<string>\r\n  @ViewChild(\"searchInput\") searchInput: ElementRef;\r\n  @Output() setActiveChat = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    private svc: BaseService,\r\n    public dialog: MatDialog,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.searchInput) {\r\n      fromEvent(this.searchInput.nativeElement, \"input\")\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(1000),\r\n          distinctUntilChanged(),\r\n          startWith(\"\"),\r\n          mergeMap((value) => {\r\n            this.loading = true;\r\n            if (!value) {\r\n              const data = {\r\n                sorting: \"ORDER BY full_name ASC\",\r\n                search_field: \"full_name\",\r\n                search_value: \"\",\r\n                condition: \"contains\",\r\n              };\r\n              return this.svc.post(\"AllUsers\", data).pipe(\r\n                map((res) => {\r\n                  this.u_users = res.users.filter(\r\n                    (u) => u.ref_id !== StorageService.getUserData().ref_id\r\n                  );\r\n                  console.log(\r\n                    \"**** Res of All users (single chat):\\n\\n\",\r\n                    res,\r\n                    this.u_users\r\n                  );\r\n\r\n                  if (!(this.u_users && this.u_users.length)) {\r\n                    this.u_users = [];\r\n                  }\r\n                  this.CopyAllUsers = [...this.u_users];\r\n                  return res;\r\n                })\r\n              );\r\n            }\r\n            const temparaay = [...this.CopyAllUsers];\r\n            const filteruser = temparaay.filter((user) => {\r\n              const searchValue = value.toLowerCase();\r\n              if (user.full_name.toLowerCase().startsWith(searchValue)) {\r\n                return -1;\r\n              }\r\n            });\r\n            const returnData = {\r\n              users: filteruser,\r\n            };\r\n            return of(returnData);\r\n          })\r\n        )\r\n        .subscribe((res) => {\r\n          this.loading = false;\r\n          this.u_users = res.users.filter(\r\n            (u) => u.ref_id !== StorageService.getUserData().ref_id\r\n          );\r\n          if (!this.u_users || !this.u_users.length) {\r\n            this.toastr.error(\"No contacts found\", \"Opps!\");\r\n            this.AllUsers = [];\r\n          } else {\r\n            this.AllUsers = this.u_users;\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  backScreen() {\r\n    console.log(\"backscreen - new-chat\");\r\n\r\n    this.changeEvent.emit({ event: \"THREAD\", group: {} });\r\n  }\r\n\r\n  //Called when \"Add Group Chat\" heading clicked\r\n  addGroupEvent() {\r\n    this.changeEvent.emit({ event: \"GROUP\", group: {} });\r\n  }\r\n\r\n  startChat(user, val) {\r\n    if (this.loading) return;\r\n    this.loading = true;\r\n    const data = {\r\n      group_title: StorageService.getUserData().username + \"-\" + user.full_name, //TTuser.full_name,\r\n      participants: [user.user_id],\r\n      auto_created: 1,\r\n    };\r\n    console.log(\"** new group creation: \", StorageService.getUserData());\r\n\r\n    this.svc.post(\"CreateGroup\", data).subscribe((v) => {\r\n      if (v && v.status == 200) {\r\n        const subscribedata = {\r\n          ...v.group,\r\n          key: v.group[\"channel_key\"],\r\n          channel: v.group[\"channel_name\"],\r\n        };\r\n        const data = [];\r\n        data.push(subscribedata);\r\n        this.pubsubService.subscribeToChat(data);\r\n\r\n        //ABM\r\n        const groupInfo = {\r\n          from: StorageService.getUserData().ref_id,\r\n          to: [user.ref_id],\r\n          action: \"new\",\r\n          groupModel: v,\r\n        };\r\n        console.log(\r\n          \"** notification send on group creation :\\n\\n\",\r\n          groupInfo,\r\n          \"\\n\\n\\n\\n\",\r\n          v,\r\n          \"\\n\",\r\n          val\r\n        );\r\n        this.pubsubService.sendNotificationOnGroupUpdation(groupInfo);\r\n        //\r\n\r\n        this.changeEvent.emit({ event: \"THREAD\", group: v.group });\r\n        v.group.clicked_item = val;\r\n        this.setActiveChat.emit(v.group);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"newChatHeader\">\r\n  <div class=\"newChatLeft hand\">\r\n    <img\r\n      src=\"./assets/images/arrow-left.png\"\r\n      class=\"arrowLeft\"\r\n      (click)=\"backScreen()\"\r\n    />\r\n    <p class=\"newChatHeading\">New Chat</p>\r\n  </div>\r\n  <div class=\"newChatRight hand\">\r\n    <img class=\"goodMark\" src=\"./assets/images/checkmark.png\" />\r\n  </div>\r\n</div>\r\n<div class=\"newChatSearchBox\">\r\n  <div class=\"input-group\">\r\n    <div class=\"input-group-prepend\">\r\n      <img src=\"./assets/images/search.png\" class=\"seacrchIcon\" />\r\n    </div>\r\n    <input type=\"text\" class=\"form-control\" placeholder=\"Search\" #searchInput />\r\n  </div>\r\n</div>\r\n<div class=\"addGrpChat\">\r\n  <div class=\"addGrpChatTop hand\" (click)=\"addGroupEvent()\">\r\n    <img src=\"./assets/images/Group Chat.png\" class=\"addgrpIcon\" />\r\n    <p class=\"addGrpTitle\">Add Group Chat</p>\r\n  </div>\r\n  <div class=\"addGrpSep\"></div>\r\n  <!-- <div class=\"addGrpSub\"> -->\r\n  <p class=\"cntct\">Contacts</p>\r\n  <!-- </div> -->\r\n</div>\r\n<div class=\"contactListContainer max-height\">\r\n  <ng-container *ngFor=\"let user of AllUsers\">\r\n    <div class=\"contactListCard hand\" (click)=\"startChat(user, 'chat')\">\r\n      <div class=\"contactListCardLeft\">\r\n        <img src=\"./assets/images/user.png\" class=\"ListCardIcon\" />\r\n        <p class=\"ListCardName text-capitalize pb-1\">{{ user.full_name }}</p>\r\n      </div>\r\n      <div class=\"contactListCardRight justify-content-end pl-1\">\r\n        <img src=\"./assets/images/chat.png\" class=\"pl-1 ListCardButton hand\" />\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from \"@angular/router\";\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\nimport FormsHandler from '../../shared/FormsHandler/FormsHandler';\r\nimport { AuthService } from '../../shared/auth/auth.service'; \r\nimport { project_id } from 'src/constants/const';\r\n\r\n@Component({\r\n  selector: 'ngx-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  formError = '';\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _fb: FormBuilder,\r\n    public auth: AuthService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.auth.islogin()) {\r\n      this.router.navigate(['chat']);\r\n    }\r\n    this.buildForm();\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter') {\r\n        this.onLogin();\r\n      }\r\n    });\r\n  }\r\n\r\n  buildForm() {\r\n    this.loginForm = this._fb.group({\r\n      'email': new FormControl('', [Validators.required, Validators.minLength(4), Validators.maxLength(50)]),\r\n      'password': new FormControl(null, [Validators.required, Validators.minLength(8), Validators.maxLength(14)])\r\n    }, { updateOn: 'change' });\r\n  }\r\n\r\n  onLogin() {\r\n    FormsHandler.validateForm(this.loginForm);\r\n    if (this.loginForm.invalid) return;\r\n    const saveData = this.loginForm.value;\r\n    saveData.project_id = project_id; //'1RN1RP';\r\n    this.loading = true;\r\n    this.formError = null;\r\n    this.auth.login(saveData).subscribe(v => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        StorageService.setUserData(v);\r\n        StorageService.setAuthToken(v.auth_token);\r\n        StorageService.setAuthUsername(v.ref_id);\r\n        this.router.navigate(['chat']);\r\n        this.loginForm.reset();\r\n      } else {\r\n        this.formError = v.message;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.loginForm.reset();\r\n  }\r\n\r\n}\r\n","<div class=\"containerWrapper\">\r\n  <img src=\"./assets/images/logo2.png\" class=\"logo\" />\r\n  <div class=\"innerWrapper\">\r\n    <h6 class=\"wrapperHeading\">Sign In</h6>\r\n    <p class=\"text-danger text-capitalize\">{{formError}}</p>\r\n    <div class=\"inputsContainer form-group\">\r\n      <form [formGroup]=\"loginForm\" class=\"w-100\" (submit)=\"onLogin()\">\r\n        <input type=\"email\" class=\"form-control\" placeholder=\"Email/Username\" formControlName=\"email\" />\r\n        <form-errors [control]=\"loginForm.get('username')\"></form-errors>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Password\" formControlName=\"password\" />\r\n        <form-errors [control]=\"loginForm.get('password')\"></form-errors>\r\n      </form>\r\n    </div>\r\n    <div class=\"buttonsContainer\">\r\n      <button type=\"submit\" class=\"signButton\" (click)=\"onLogin()\" [disabled]=\"loading\">SIGN IN</button>\r\n      <h5 class=\"bottomLink\"><a routerLink=\"/signup\">SIGN UP</a></h5>\r\n      <p class=\"text-muted\">Version:2</p>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from \"@angular/router\";\r\nimport FormsHandler from '../../shared/FormsHandler/FormsHandler';\r\nimport { AuthService } from '../../shared/auth/auth.service';\r\nimport { ValidationService } from 'src/app/shared/validators';\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\nimport { project_id } from 'src/constants/const';\r\n\r\n@Component({\r\n  selector: 'sign-up',\r\n  templateUrl: './sign-up.component.html',\r\n  styleUrls: ['./sign-up.component.scss']\r\n})\r\nexport class SignUpComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  formError;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _fb: FormBuilder,\r\n    public auth: AuthService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.buildForm();\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter') {\r\n        this.onLogin();\r\n      }\r\n    });\r\n  }\r\n\r\n  buildForm() {\r\n    this.loginForm = this._fb.group({\r\n      'full_name': new FormControl('', [Validators.required, ValidationService.usernameValidator, Validators.minLength(4), Validators.maxLength(50)]),\r\n      'device_type': new FormControl('web', [Validators.required]),\r\n      'device_model': new FormControl('web', [Validators.required]),\r\n      'device_os_ver': new FormControl(navigator.platform, [Validators.required]),\r\n      'email': new FormControl(null, [ValidationService.emailValidator, Validators.required]),\r\n      'password': new FormControl(null, [Validators.required])\r\n    }, { updateOn: 'change' });\r\n    console.log('this.signupForm', this.loginForm);\r\n  }\r\n\r\n  onLogin() {\r\n    FormsHandler.validateForm(this.loginForm);\r\n    if (this.loginForm.invalid) return;\r\n    const saveData = this.loginForm.value;\r\n    saveData.project_id = project_id; //'1RN1RP';\r\n    this.loading = true;\r\n    this.formError = null;\r\n    this.auth.signup(saveData).subscribe(v => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        StorageService.setUserData(v);\r\n        StorageService.setAuthToken(v.auth_token);\r\n        StorageService.setAuthUsername(v.ref_id);\r\n        this.router.navigate(['chat']);\r\n        this.loginForm.reset();\r\n      } else {\r\n        this.formError = v.message;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"containerWrapper\">\r\n  <img src=\"./assets/images/logo2.png\" class=\"logo\" />\r\n  <div class=\"innerWrapper\">\r\n    <h6 class=\"wrapperHeading\">Sign Up to your account</h6>\r\n    <p class=\"text-danger text-capitalize\">{{formError }}</p>\r\n    <div class=\"inputsContainer form-group\">\r\n      <form [formGroup]=\"loginForm\" class=\"w-100\" (submit)=\"onLogin()\">\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"Your Username\" formControlName=\"full_name\" />\r\n        <form-errors [control]=\"loginForm.get('full_name')\"></form-errors>\r\n        <input type=\"email\" class=\"form-control\" placeholder=\"Your Email\" formControlName=\"email\" />\r\n        <form-errors [control]=\"loginForm.get('email')\"></form-errors>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Your Password\" formControlName=\"password\" />\r\n        <form-errors [control]=\"loginForm.get('password')\"></form-errors>\r\n      </form>\r\n    </div>\r\n    <div class=\"buttonsContainer\">\r\n      <button type=\"submit\" class=\"signButton\" (click)=\"onLogin()\" [disabled]=\"loading\"> SIGN\r\n        UP</button>\r\n      <h5 class=\"bottomLink\"><a routerLink=\"/login\">SIGN IN</a></h5>\r\n    </div>\r\n  </div>\r\n</div>","import { FormGroup } from \"@angular/forms\";\r\n\r\nexport default class FormsHandler {\r\n\r\n    /**\r\n     * This method is use to validate Form\r\n     * @param formErrors string \r\n     * @param form  form instance | object\r\n     * @return errors as string\r\n     * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n     **/\r\n    static validateForm(form) {\r\n        if (form.valid) {\r\n            return true;\r\n        } else {\r\n            if (form.controls) {\r\n                for (const field in form.controls) {\r\n                    const control = form.get(field);\r\n                    if (control.invalid) {\r\n                        control.markAsTouched({ onlySelf: true });\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n    * this method is use to validate Form Array\r\n    * @param formErrors string \r\n    * @param form  form instance | object\r\n    * @return errors as string\r\n    * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n    **/\r\n    static validateFormArray(form) {\r\n        if (form.valid) {\r\n            return true;\r\n        } else {\r\n            if (form.controls) {\r\n                for (const group in form.controls) {\r\n                    const groupFiled = form.get(group) as FormGroup;\r\n                    for (const field in groupFiled.controls) {\r\n                        const control = groupFiled.get(field);\r\n                        if (control.invalid) {\r\n                            control.markAsTouched({ onlySelf: true });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static deleteEmptyFileds(data) {\r\n        if (data) {\r\n            for (const key in data) {\r\n                if (data[key] == '' || data[key] == null) {\r\n                    delete data[key];\r\n                }\r\n                if (data[key] && typeof data[key] === 'string') {\r\n                    data[key] = data[key].trim();\r\n                }\r\n            }\r\n            return data;\r\n        }\r\n    }\r\n\r\n}","import { Component, Input } from '@angular/core';\r\nimport { AbstractControlDirective, AbstractControl } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'form-errors',\r\n    template: `\r\n    <p class='text-danger'>\r\n     {{hasErrors() ? listOfErrors() : ''}}\r\n    </p>`,\r\n})\r\nexport class GetErrorsComponent {\r\n\r\n    private static readonly errorMessages = {\r\n        'required': () => 'The specified information is required.',\r\n        'minlength': (params) => 'The min number of characters is ' + params.requiredLength,\r\n        'maxlength': (params) => 'The max allowed number of characters is ' + params.requiredLength,\r\n        'pattern': (params) => 'The required pattern is: ' + params.requiredPattern,\r\n        'years': (params) => params.message,\r\n        'countryCity': (params) => params.message,\r\n        'uniqueName': (params) => params.message,\r\n        'telephoneNumbers': (params) => params.message,\r\n        'telephoneNumber': (params) => params.message,\r\n        'invalidNumber': () => 'The specified information is invalid.',\r\n        'emptySpaces': () => 'The specified information is invalid.',\r\n        'email': () => 'Email is not valid',\r\n        'invalidPassword': () => 'Password must be a minimum of 8 characters and contain at least 1 uppercase character and 1 numeric value',\r\n        'invalidUsernameCharacters': () => 'invalid user name',\r\n        'invalidInputCharacters': () => 'The specified information is invalid.',\r\n        'invalidEmailAddress': () => 'Email is not valid',\r\n    };\r\n\r\n    @Input() private control: AbstractControlDirective | AbstractControl;\r\n\r\n    hasErrors(): boolean {\r\n        return this.control && this.control.errors && (this.control.dirty || this.control.touched);\r\n    }\r\n\r\n    listOfErrors() {\r\n        const errors = Object.keys(this.control.errors).map(field => this.getMessage(field, this.control.errors[field]));\r\n        return errors.length ? errors[0] : errors;\r\n    }\r\n\r\n    private getMessage(type: string, params: any) {\r\n        return GetErrorsComponent.errorMessages[type](params);\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { PortalModule } from '@angular/cdk/portal';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { LayoutModule } from '@angular/cdk/layout';\r\nimport { MatLegacyTableModule as MatTableModule } from '@angular/material/legacy-table';\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatLegacyPaginatorModule as MatPaginatorModule } from '@angular/material/legacy-paginator';\r\nimport { MatLegacySelectModule as MatSelectModule } from '@angular/material/legacy-select';\r\nimport { MatLegacyCheckboxModule as MatCheckboxModule } from '@angular/material/legacy-checkbox';\r\nimport { MatLegacyInputModule as MatInputModule } from '@angular/material/legacy-input';\r\nimport { MatLegacyRadioModule as MatRadioModule } from '@angular/material/legacy-radio';\r\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatLegacySlideToggleModule as MatSlideToggleModule } from '@angular/material/legacy-slide-toggle';\r\nimport { MatLegacyTooltipModule as MatTooltipModule } from '@angular/material/legacy-tooltip';\r\nimport { MatLegacyFormFieldModule as MatFormFieldModule } from '@angular/material/legacy-form-field';\r\nimport { MatLegacyTabsModule as MatTabsModule } from '@angular/material/legacy-tabs';\r\nimport { MatLegacyProgressBarModule as MatProgressBarModule } from '@angular/material/legacy-progress-bar';\r\nimport { MatLegacyMenuModule as MatMenuModule } from '@angular/material/legacy-menu';\r\nimport { MatLegacyDialogModule as MatDialogModule } from '@angular/material/legacy-dialog';\r\nconst globalRippleConfig: RippleGlobalOptions = { disabled: true };\r\nimport {\r\n  MAT_RIPPLE_GLOBAL_OPTIONS,\r\n  RippleGlobalOptions,\r\n  MatRippleModule,\r\n  MatNativeDateModule,\r\n} from '@angular/material/core';\r\nimport {MatLegacyProgressSpinnerModule as MatProgressSpinnerModule} from '@angular/material/legacy-progress-spinner';\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatRippleModule,\r\n    MatDialogModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    CdkTableModule,\r\n    DragDropModule,\r\n    PortalModule,\r\n    CommonModule,\r\n    MatSelectModule,\r\n    MatCheckboxModule,\r\n    MatInputModule,\r\n    MatRadioModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule,\r\n    MatTabsModule,\r\n    MatButtonModule,\r\n    MatTableModule,\r\n    MatSlideToggleModule,\r\n    OverlayModule,\r\n    MatTooltipModule,\r\n    MatProgressBarModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule\r\n  ],\r\n  declarations: [],\r\n  entryComponents: [],\r\n  providers: [\r\n    { provide: MAT_RIPPLE_GLOBAL_OPTIONS, useValue: globalRippleConfig }\r\n  ],\r\n  exports: [\r\n    MatFormFieldModule,\r\n    PlatformModule,\r\n    MatRippleModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    CdkTableModule,\r\n    DragDropModule,\r\n    OverlayModule,\r\n    PortalModule,\r\n    MatSelectModule,\r\n    MatCheckboxModule,\r\n    MatInputModule,\r\n    MatRadioModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule,\r\n    MatTabsModule,\r\n    MatTableModule,\r\n    MatSlideToggleModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatProgressBarModule,\r\n    LayoutModule,\r\n    MatProgressSpinnerModule\r\n  ]\r\n})\r\nexport class AppMaterialModule { }\r\n","import { CanActivate, Router } from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\nimport { AuthService } from './auth.service';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(\r\n    private authService: AuthService,\r\n    protected router: Router\r\n  ) { }\r\n\r\n  canActivate() {\r\n    const isAuthenticated = this.authService.isAuthenticated();\r\n    if (!isAuthenticated) {\r\n      this.router.navigate(['login']);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n  public userSubject$ = new Subject();\r\n  public currentUserReq$;\r\n  public currentUserId;\r\n  public userSubject = new ReplaySubject<any>(1);\r\n  private userRequest: Observable<any>;\r\n\r\n  constructor(\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  login(data): Observable<any> {\r\n    return this.http.post('Login', data);\r\n  }\r\n\r\n  signup(data): Observable<any> {\r\n    return this.http.post('SignUp', data);\r\n  }\r\n\r\n  logout(): void {\r\n    StorageService.clearLocalStorge();\r\n  }\r\n\r\n  getToken(): string {\r\n    return StorageService.getAuthToken()\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n\r\n  islogin(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n\r\n  resetUser() {\r\n    this.currentUserId = null;\r\n    this.userRequest = null;\r\n    this.userSubject = new ReplaySubject(1);\r\n  }\r\n\r\n  getUserId() {\r\n    const userdata = StorageService.getUserData();\r\n    return userdata._id;\r\n  }\r\n\r\n  isAuthUser(): Observable<any> {\r\n    return this.http.get<any>('users/current-user');\r\n  }\r\n}\r\n","\r\nexport function isEmptyObj(obj) {\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function isEmptyArray(array) {\r\n    if (!Array.isArray(array) || !array.length) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function isEmail(email) {\r\n    const emailLowercase = email.toLowerCase();\r\n    if (email == null || emailLowercase.match(/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-zA-Z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/)) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function FindObjectByValue(inputArray: Array<any>, value: string) {\r\n    return inputArray.find(e => e == value);\r\n}\r\n\r\nexport function FindArrayObject(inputArray, key, value) {\r\n    return inputArray.find(e => e[key] == value);\r\n}\r\n\r\nexport function AutoUnsubscribe(constructor) {\r\n    const original = constructor.prototype.ngOnDestroy;\r\n    constructor.prototype.ngOnDestroy = function () {\r\n        for (const prop in this) {\r\n            if (prop) {\r\n                const property = this[prop];\r\n                if (property && (typeof property.unsubscribe === 'function')) {\r\n                    property.unsubscribe();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (original && typeof original === 'function') {\r\n            original.apply(this, arguments)\r\n        }\r\n    };\r\n\r\n}\r\nexport function isMobile() {\r\n    return window.innerWidth < 768\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Observable, of } from 'rxjs';\r\nimport { debounce, debounceTime, map } from 'rxjs/operators';\r\nimport { BaseService } from '../services/base.service';\r\n\r\n@Pipe({\r\n  name: 'filter'\r\n})\r\nexport class filterPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private toastr: ToastrService,\r\n    private svc: BaseService\r\n  ) {\r\n  }\r\n\r\n  transform(items: any[], value: string): Observable<any> {\r\n    if (!items) return of([]);\r\n    if (!value) return of(items);\r\n    const data = {\r\n      \"search_field\": \"full_name\",\r\n      \"search_value\": value,\r\n      \"condition\": \"contains\",\r\n    }\r\n    return this.svc.post('AllUsers', data).pipe(\r\n      debounceTime(500),\r\n      map(res => {\r\n        if (res.status == 400) {\r\n          this.toastr.error(\"No contacts found\", \"Opps!\");\r\n          return [];\r\n        }\r\n        return res.users;\r\n      })\r\n    )\r\n  }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n@Pipe({\r\n    name: 'safeUrl'\r\n})\r\nexport class SafeUrlPipe implements PipeTransform {\r\n    constructor(private domSanitizer: DomSanitizer) { }\r\n    transform(url) {\r\n        return this.domSanitizer.bypassSecurityTrustResourceUrl(url);\r\n    }\r\n}","import { HttpClient } from '@angular/common/http';\r\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class BaseService {\r\n\r\n  constructor(\r\n    protected http: HttpClient\r\n  ) { }\r\n\r\n  public userData = new ReplaySubject<any>();\r\n  userData$ = this.userData.asObservable();\r\n\r\n  public isLoading = new Subject<any>();\r\n  isLoadingResponse = this.isLoading.asObservable();\r\n\r\n  /**\r\n  * This method is used to Call API using Http GET method.\r\n  * @param URL \r\n  * @return obserables responsce\r\n  * @author  Muhammad Mukhtiar  <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  get(URL): Observable<any> {\r\n    return this.http.get(URL);\r\n  }\r\n\r\n  /**\r\n  * This method is use to add or update data using API \r\n  * @param formData \r\n  * @return obserables responsce\r\n  * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  save(URL, data = {}): Observable<any> {\r\n    return this.http.post(URL, data);\r\n  }\r\n\r\n  /**\r\n  * This method is used to Call API using Http Post method. \r\n  * @param URL \r\n  * @param URL \r\n  * @return obserables responsce\r\n  * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  post(URL: string, payload: any = {}): Observable<any> {\r\n    return this.http.post(URL, payload);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpEvent, HttpResponse, HttpInterceptor, HttpHandler, HttpRequest, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { StorageService } from './storage.service';\r\nimport { environment } from '../../../environments/environment';\r\nimport { BaseService } from './base.service';\r\n\r\n@Injectable()\r\nexport class HttpService implements HttpInterceptor {\r\n    private baseUrl = environment.apiBaseUrl;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private svc: BaseService\r\n    ) { }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        req = this.getModifiedReq(req);\r\n        return next.handle(req)\r\n            .pipe(\r\n                tap(event => {\r\n                    if (event instanceof HttpResponse) {\r\n                        if (event && event.body) {\r\n                            const serRes = event.body;\r\n                            this.svc.isLoading.next(false);\r\n                            if (serRes.code === 401) {\r\n                                StorageService.clearLocalStorge();\r\n                                this.showErrorMsg(serRes.message);\r\n                                this.router.navigate(['/login']);\r\n                            } else if (serRes.code === 407) {\r\n                                // StorageService.clearLocalStorge();\r\n                                this.showErrorMsg(serRes.message);\r\n                                // this.router.navigate(['/auth/login']);\r\n                            } else if (serRes.code === 200 || serRes.code === 201) {\r\n                            } else {\r\n                                this.showErrorMsg(serRes.message);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }),\r\n                catchError(errorRes => {\r\n                    this.svc.isLoading.next(false);\r\n                    console.log('this should print your error!', errorRes.error);\r\n                    if (errorRes instanceof HttpErrorResponse) {\r\n                        if (errorRes.status === 500) {\r\n                            // this.toastrService.danger('Opps!', \"Something went wrong\");\r\n                        } else {\r\n                            this.showErrorMsg(errorRes.message);\r\n                        }\r\n                    }\r\n                    return throwError(errorRes);\r\n                })\r\n            );\r\n    }\r\n\r\n    getModifiedReq(req: HttpRequest<any>): HttpRequest<any> {\r\n        req = req.clone({ url: this.baseUrl + req.url });\r\n        const formdata = JSON.stringify(req.body);\r\n        const auth_token = StorageService.getAuthToken();\r\n        if (auth_token) req = req.clone({ headers: req.headers.set('Authorization', 'Bearer ' + auth_token) });\r\n        req = req.clone({ headers: req.headers.set('Content-Type', 'application/json') });\r\n        req = req.clone({ body: formdata });\r\n        return req;\r\n    }\r\n\r\n    showErrorMsg(errorResponse) {\r\n        if (typeof errorResponse == 'string') {\r\n            // this.toastrService.danger('Opps!', errorResponse);\r\n        }\r\n\r\n    }\r\n}","import { Injectable, OnDestroy, Output } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { StorageService } from './storage.service';\r\nimport { project_id } from 'src/constants/const';\r\ndeclare const MVDOTOK: any;\r\n\r\n@Injectable()\r\nexport class PubsubService implements OnDestroy {\r\n  @Output()\r\n  protected wsSubscription: Subscription;\r\n  public Client: any;\r\n\r\n  constructor() { }\r\n\r\n\r\n  public ngOnDestroy(): void {\r\n    this.wsSubscription.unsubscribe();\r\n  }\r\n\r\n\r\n  public initConfigure(): void {\r\n    const user = StorageService.getUserData();\r\n    this.Client = new MVDOTOK.Client({\r\n      projectID: project_id,//\"1RN1RP\",\r\n      host: `${user.messaging_server_map.complete_address}`,\r\n      stunServer: `${user.stun_server_map ? user.stun_server_map.complete_address : ''}`\r\n    });\r\n    this.Client.Register(user.ref_id.toString(), user.authorization_token.toString());\r\n  }\r\n\r\n\r\n  public sendMessage(message): void {\r\n    this.Client.SendMessage(message);\r\n  }\r\n\r\n  public subscribeToChat(groups): void {\r\n    groups.map(chanelObj => {\r\n      this.Client.Subscribe(chanelObj);\r\n    });\r\n  }\r\n\r\n\r\n  public unsubscribeToChat(groups): void {\r\n    this.Client.UnSubscribe(groups);\r\n  }\r\n\r\n\r\n  public Disconnect(): void {\r\n    this.Client.Disconnect();\r\n  }\r\n\r\n\r\n  readMessage(chatMessages) {\r\n    chatMessages.map(chat => {\r\n      this.Client.SendReceipt(chat);\r\n    });\r\n  }\r\n\r\n\r\n  readSingleMessage(chatMessages) {\r\n    this.Client.SendReceipt(chatMessages);\r\n  }\r\n\r\n  \r\n  sendNotificationOnGroupUpdation(obj) {\r\n    console.log(\"** sendNotificationOnGroupUpdation\")\r\n    this.Client.SendNotification(obj);\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n@Injectable()\r\nexport class StorageService {\r\n\r\n  static readonly STORAGE_KEY_AUTH_TOKEN = 'auth_token';\r\n  static readonly STORAGE_KEY_USER_NAME = 'username';\r\n  static readonly STORAGE_KEY_USER_DATA = 'user_data';\r\n\r\n  static clearLocalStorge() {\r\n    localStorage.clear();\r\n    sessionStorage.clear();\r\n    return;\r\n  }\r\n\r\n  static getAuthToken() {\r\n    return localStorage.getItem(StorageService.STORAGE_KEY_AUTH_TOKEN);\r\n  }\r\n\r\n  static setAuthToken(token) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_AUTH_TOKEN, token);\r\n  }\r\n\r\n  static removeAuthToken() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_AUTH_TOKEN);\r\n  }\r\n\r\n  static getAuthUsername() {\r\n    return localStorage.getItem(StorageService.STORAGE_KEY_USER_NAME);\r\n  }\r\n\r\n  static setAuthUsername(username) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_USER_NAME, username);\r\n  }\r\n\r\n  static removeAuthUsername() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_USER_NAME);\r\n  }\r\n\r\n  static setUserData(userData) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_USER_DATA, JSON.stringify(userData));\r\n  }\r\n\r\n  static getUserData() {\r\n    return JSON.parse(localStorage.getItem(StorageService.STORAGE_KEY_USER_DATA));\r\n  }\r\n\r\n  static removeUserData() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_USER_DATA);\r\n  }\r\n\r\n}\r\n","import { Injectable, Output } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n// declare var PUBSUB: any;\r\ndeclare const PUBSUB: any;\r\ndeclare const pubsub: any;\r\n\r\n@Injectable()\r\nexport class WebsocketService {\r\n  @Output() public ready: Subject<void> = new Subject();\r\n  public webSocket: WebSocket;\r\n  ws;\r\n  Client;\r\n\r\n  public initSocket(url: string): Observable<any> {\r\n    this.webSocket = new WebSocket('wss://' + 'vtest3.vdotok.com:8443' + '/call');\r\n    this.webSocket.onopen = () => this.ready.next();\r\n    return new Observable<any>(observer => {\r\n      this.webSocket.onmessage = (event: MessageEvent) => observer.next(event);\r\n      this.webSocket.onerror = (event: Event) => observer.error(event);\r\n      this.webSocket.onclose = (event: CloseEvent) => observer.complete();\r\n      // Callback invoked on unsubscribe\r\n      return () => this.webSocket.close();\r\n    });\r\n  }\r\n\r\n  public send(message: string): void {\r\n    // if (this.webSocket.readyState === WebSocket.OPEN) {\r\n    //   this.webSocket.send(message);\r\n    // }\r\n  }\r\n\r\n\r\n  public initPUBSUBSocket() {\r\n    return new PUBSUB.Client({\r\n      host: \"ws://emit1.togee.io\",\r\n      port: \"8080\",\r\n      credentials: {\r\n        username: \"john\",\r\n        password: \"\"\r\n      },\r\n      clientId: \"12345\",\r\n      reConnectivity: true,\r\n      secret: \"cWV91camkwd99XO9rvHmamvXxGdyeHK5\"\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { WebsocketService } from './services/websocket.service';\r\nimport { StorageService } from './services/storage.service';\r\nimport { AuthService } from './auth/auth.service';\r\nimport { AuthGuard } from './auth/auth-guard.service';\r\nimport { BaseService } from './services/base.service';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { HttpService } from './services/http.service';\r\nimport { PubsubService } from './services/pubsub.service';\r\nimport { GetErrorsComponent } from './FormsHandler/get-errors.component';\r\nimport { MAT_LEGACY_DIALOG_DEFAULT_OPTIONS as MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/legacy-dialog';\r\nimport { filterPipe } from './pipe/filter';\r\nimport { SafeUrlPipe } from './pipe/safeurl';\r\n\r\nconst components = [\r\n  GetErrorsComponent,\r\n  filterPipe,\r\n  SafeUrlPipe\r\n]\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n  ],\r\n  declarations: [...components],\r\n  exports: [...components],\r\n  providers: [\r\n    StorageService,\r\n    AuthService,\r\n    AuthGuard,\r\n    BaseService,\r\n    PubsubService,\r\n    WebsocketService,\r\n    { provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: { hasBackdrop: false } },\r\n    { provide: HTTP_INTERCEPTORS, useClass: HttpService, multi: true },\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","\r\nimport { AbstractControl } from '@angular/forms';\r\n\r\n\r\n\r\nexport class ValidationService {\r\n\r\n    static specialCharValidator(control) {\r\n        if (control.value == null || control.value.match(/^[a-zA-Z0-9._]*$/)) {\r\n            return null;\r\n        } else {\r\n\r\n            return { 'invalidCharacters': true };\r\n        }\r\n    }\r\n\r\n    static uppercaseCharacterRule(amount: number): any {\r\n        return function validate(control): { [key: string]: any } {\r\n            const value: string = control.value;\r\n            if (value.length === 0) {\r\n                return undefined;\r\n            }\r\n            const pattern = /[^A-Z]+/g;\r\n            const stripped = value.replace(pattern, '');\r\n            if (stripped.length < amount) {\r\n                return { 'uppercaseCharacterRule': true };\r\n            }\r\n            return undefined;\r\n        };\r\n    }\r\n\r\n    static creditCardValidator(control) {\r\n        // Visa, MasterCard, American Express, Diners Club, Discover, JCB\r\n        if (control.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidCreditCard': true };\r\n        }\r\n    }\r\n\r\n    static emailValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const emailLowercase = control.value.toLowerCase();\r\n        if (control.value == null || emailLowercase.match(/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-zA-Z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidEmailAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static isEmptyInputValue(value: any): boolean {\r\n        // we don't check for string here so it also works with arrays\r\n        return value == null || value.length === 0;\r\n    }\r\n\r\n    static emptySpacesValidator(control) {\r\n        console.log('emptySpacesValidator', control, control.value);\r\n        if (control.value.match(/([^\\s])/)) {\r\n            return null;\r\n        } else {\r\n            return { 'emptySpaces': true };\r\n        }\r\n    }\r\n\r\n    static removeSpace(value: any): string {\r\n        return value.trim()\r\n    }\r\n\r\n    static englishWordsValidator(control) {\r\n        console.log('englishWordsValidator', control);\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const tempstring = ValidationService.removeSpace(control.value);\r\n        if (tempstring.match(/^[a-zA-Z]+( [\\&a-zA-Z]+)*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidCharacters': true };\r\n        }\r\n    }\r\n\r\n    static nameValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^(?:[a-zA-Z0-9\\s@,=%$#&_\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDCF\\uFDF0-\\uFDFF\\uFE70-\\uFEFF]|(?:\\uD802[\\uDE60-\\uDE9F]|\\uD83B[\\uDE00-\\uDEFF])){0,30}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNameCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n    static whiteSpaceValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n\r\n        if (control.value.match(/^[-a-zA-Z\\u0600-\\u06FF0-9-()]+(\\s+[-a-zA-Z\\u0600-\\u06FF0-9-()]+)*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidWhiteSpace': true };\r\n        }\r\n    }\r\n\r\n\r\n    static phoneValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^\\+?[0-9]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPhone': true };\r\n        }\r\n    }\r\n\r\n    static phoneUsernameEmailValidator(control) {\r\n        if (control.value == null) return;\r\n        let validEmail = true, validPhone = true, validUsername = true;\r\n        if (ValidationService.emailValidator(control) != null) {\r\n            validEmail = false;\r\n        }\r\n        if (!control.value.match(/^[a-zA-Z0-9]{5,17}$/)) {\r\n            validUsername = false;\r\n        }\r\n        if (!control.value.match(/^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/)) {\r\n            validPhone = false;\r\n        }\r\n        console.log('phoneUsernameEmailValidator', ValidationService.emailValidator(control), validEmail, validUsername, validPhone)\r\n        if (validEmail || validUsername || validPhone) return null;\r\n        return { 'invalidUsernameEmail': true };\r\n    }\r\n\r\n    static usernameValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (control.value == null || control.value.match(/^[a-zA-Z0-9]+$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidUsernameCharacters': true };\r\n        }\r\n    }\r\n\r\n    static passwordValidator(control) {\r\n        // {8,100}           - Assert password is between 8 and 100 characters\r\n        // (?=.*[0-9])       - Assert a string has at least one number\r\n        if (control.value && !ValidationService.uppercaseCharacterRule(1)(control) && control.value.match(/^(?=.*[0-9])[a-zA-Z0-9!@#$%^&*]{6,100}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPassword': true };\r\n        }\r\n    }\r\n\r\n    static MatchPassword(control: AbstractControl, crud) {\r\n        if (control.value == null) return null;\r\n        return control.root.get('password').value != control.value ? { passworMismatch: true } : null;\r\n    }\r\n\r\n\r\n    static pinCodeValidator(control) {\r\n        if (control.value && control.value.match(/^[0-9]{4}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPinCode': true };\r\n        }\r\n    }\r\n\r\n\r\n    static trimData(data) {\r\n        if (data) {\r\n            for (const key in data) {\r\n                if (data[key] && typeof data[key] == \"string\") {\r\n                    data[key] = data[key].trim();\r\n                }\r\n            }\r\n            return data;\r\n        }\r\n    }\r\n\r\n\r\n    static checkInteger(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (parseFloat(control.value) == 0 || (parseFloat(control.value) || parseInt(control.value)) && !isNaN(control.value)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumber': true };\r\n        }\r\n    }\r\n\r\n\r\n    static alphnumericValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (ValidationService.whiteSpaceValidator(control.value)) return;\r\n        // if (control.value.match(/^[^!@$%^&*_+#\\\\/<>?:;|=.,0-9]{1,500}$/)) {\r\n        if (control.value.match(/^[a-zA-Z0-9-,]+(\\s{0,1}[a-zA-Z-, ])*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n    static stringvalidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^[a-zA-Z0-9-,]+(\\s{0,1}[a-zA-Z-, ])*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n    static disallowspecial(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^[A-Za-z0-9 ]+$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static alphValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^\\+?[A-Za-z]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidString': true };\r\n        }\r\n    }\r\n\r\n    static numericValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (ValidationService.whiteSpaceValidator(control.value)) return;\r\n        const value = control.value.toString()\r\n        if (value.match(/^\\+?[0-9]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumeric': true };\r\n        }\r\n    }\r\n\r\n    static floatNumberValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^[+-]?\\d+(\\.\\d+)?$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumeric': true };\r\n        }\r\n    }\r\n\r\n\r\n    static mackAddressValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidMackAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static gatewayAddressValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidMackAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static ipValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidIp': true };\r\n        }\r\n    }\r\n\r\n\r\n    static domainNameValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^(?=^.{1,254}$)(^(?:(?!\\d+\\.)[a-zA-Z0-9_\\-]{1,63}\\.?)+(?:[a-zA-Z]{2,})$)/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidDomainName': true };\r\n        }\r\n    }\r\n\r\n}\r\n","export const project_id = \"1RN1RP\";","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  apiBaseUrl: \"https://q-tenant.vdotok.dev/API/v0/\",\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":["RouterModule","ChatComponent","LoginComponent","SignUpComponent","AuthGuard","routes","path","component","canActivate","redirectTo","AppRoutingModule","forRoot","imports","exports","AppComponent","constructor","selectors","decls","vars","template","i0","BrowserModule","FormsModule","ReactiveFormsModule","CommonModule","BrowserAnimationsModule","AppMaterialModule","HttpClientModule","SharedModule","AddGroupComponent","NewChatComponent","ToastrModule","AppModule","bootstrap","maxOpened","preventDuplicates","declarations","EventEmitter","FormControl","Validators","FormsHandler","StorageService","fromEvent","map","debounceTime","distinctUntilChanged","mergeMap","startWith","of","pubsubService","svc","toastr","_fb","changeDetector","getAuthUsername","getUserData","chatHistory","ngOnInit","form","group","group_title","required","maxLength","updateOn","document","addEventListener","event","code","loading","addGroup","ngAfterViewInit","searchInput","nativeElement","pipe","target","value","data","sorting","search_field","search_value","condition","post","res","console","log","u_users","users","filter","u","ref_id","length","CopyAllUsers","temparaay","filteruser","user","searchValue","toLowerCase","full_name","startsWith","returnData","subscribe","error","AllUsers","setAlreadySelected","selectedUsers","userIndex","find","alluser","user_id","detectChanges","selectContact","contact","groupnameError","push","selected","Set","openDialog","content","useridArray","participants","auto_created","v","status","setActiveChat","emit","reset","changeEvent","addGroupModel","validateForm","invalid","participants_ref_ids","p","groupInfo","from","to","action","groupModel","sendNotificationOnGroupUpdation","success","closemodel","forEach","element","backScreen","viewQuery","ctx","FindArrayObject","axios","environment","router","elRef","dialog","groupForm","group_id","initConfigure","Client","on","response","sdkconnected","AllGroups","getAllGroups","sendTextMessage","setOfflineStatus","setOnlineStatus","setOnlineStatusforSubscribe","JSON","parse","stringify","updateGroup","type","scroll","chatthread","findChatThread","isActiveThread","id","activeChat","messageBy","Date","subType","pushMessage","readSingleMessage","setTimeout","sort","a","b","setUserTyping","receiptType","chName","topic","undefined","message","messageId","messageInputElement","sendMessage","channel_name","key","channel_key","size","isGroupMessage","getTime","toString","date","grp_info","new_group","i","findIndex","grp","chat","subscribedata","channel","subscribeToChat","r","split","setActiveChatt","index","splice","unsubscribeToChat","chatTitle","grp_ind","g","editGroup","playload","editGroupModel","deleteGroup","alert","addNewGroupToAllGroup","setToActive","indexchat","sortThread","get","groups","changeSidebar","$event","threadType","screen","readsendMessage","setchat","openModal","checkFileType","preview","includes","fileType","currentUserName","chatobj","unreadchatHistory","isRead","readMessage","handleFileInput","files","fileToSend","item","invalidSize","removeAttachment","test","formData","FormData","ext","getExtension","name","subtype","getFileType","sizeOfFile","append","currentUserData","auth_token","apiBaseUrl","then","option","file_name","filename","pop","fileR","filetype","typingmessage","onlineNumbers","who","n","username","typinguser","e","nameList","userObj","join","j","setMultiUserTyping","querySelector","scrollTop","scrollHeight","newChat","logout","Disconnect","clearLocalStorge","navigate","isShowName","messageByObj","previourmessage","thread","newResponse","foundIndex","x","getLastMessage","isactivethread","unReadCount","lastMessage","openImage","imagesrc","popupimagesrc","closeImage","closeModal","isHideThread","isMobile","isHideChatScreen","window","innerWidth","addGroupEvent","startChat","val","clicked_item","project_id","auth","islogin","buildForm","onLogin","loginForm","minLength","saveData","formError","login","setUserData","setAuthToken","setAuthUsername","ngOnDestroy","consts","ValidationService","usernameValidator","navigator","platform","emailValidator","signup","valid","controls","field","control","markAsTouched","onlySelf","validateFormArray","groupFiled","deleteEmptyFileds","trim","GetErrorsComponent","hasErrors","errors","dirty","touched","listOfErrors","Object","keys","getMessage","params","errorMessages","requiredLength","requiredPattern","inputs","OverlayModule","PortalModule","CdkTableModule","DragDropModule","LayoutModule","MatLegacyTableModule","MatTableModule","PlatformModule","MatSortModule","MatLegacyPaginatorModule","MatPaginatorModule","MatLegacySelectModule","MatSelectModule","MatLegacyCheckboxModule","MatCheckboxModule","MatLegacyInputModule","MatInputModule","MatLegacyRadioModule","MatRadioModule","MatLegacyButtonModule","MatButtonModule","MatDatepickerModule","MatLegacySlideToggleModule","MatSlideToggleModule","MatLegacyTooltipModule","MatTooltipModule","MatLegacyFormFieldModule","MatFormFieldModule","MatLegacyTabsModule","MatTabsModule","MatLegacyProgressBarModule","MatProgressBarModule","MatLegacyMenuModule","MatMenuModule","MatLegacyDialogModule","MatDialogModule","MAT_RIPPLE_GLOBAL_OPTIONS","MatRippleModule","MatNativeDateModule","MatLegacyProgressSpinnerModule","MatProgressSpinnerModule","globalRippleConfig","disabled","provide","useValue","authService","isAuthenticated","factory","ReplaySubject","Subject","AuthService","http","getToken","getAuthToken","resetUser","currentUserId","userRequest","userSubject","getUserId","userdata","_id","isAuthUser","isEmptyObj","obj","hasOwnProperty","isEmptyArray","array","Array","isArray","isEmail","email","emailLowercase","match","FindObjectByValue","inputArray","AutoUnsubscribe","original","prototype","prop","property","unsubscribe","apply","arguments","filterPipe","transform","items","pure","SafeUrlPipe","domSanitizer","url","bypassSecurityTrustResourceUrl","BaseService","userData","asObservable","isLoading","URL","save","payload","HttpResponse","HttpErrorResponse","throwError","catchError","tap","HttpService","intercept","req","next","getModifiedReq","handle","body","serRes","showErrorMsg","errorRes","clone","baseUrl","formdata","headers","set","errorResponse","PubsubService","wsSubscription","MVDOTOK","projectID","host","messaging_server_map","complete_address","stunServer","stun_server_map","Register","authorization_token","SendMessage","chanelObj","Subscribe","UnSubscribe","chatMessages","SendReceipt","SendNotification","localStorage","clear","sessionStorage","getItem","STORAGE_KEY_AUTH_TOKEN","token","setItem","removeAuthToken","removeItem","STORAGE_KEY_USER_NAME","removeAuthUsername","STORAGE_KEY_USER_DATA","removeUserData","Observable","WebsocketService","initSocket","webSocket","WebSocket","onopen","ready","observer","onmessage","onerror","onclose","complete","close","send","initPUBSUBSocket","PUBSUB","port","credentials","password","clientId","reConnectivity","secret","HTTP_INTERCEPTORS","MAT_LEGACY_DIALOG_DEFAULT_OPTIONS","MAT_DIALOG_DEFAULT_OPTIONS","components","hasBackdrop","useClass","multi","specialCharValidator","uppercaseCharacterRule","amount","validate","pattern","stripped","replace","creditCardValidator","isEmptyInputValue","emptySpacesValidator","removeSpace","englishWordsValidator","tempstring","nameValidator","whiteSpaceValidator","phoneValidator","phoneUsernameEmailValidator","validEmail","validPhone","validUsername","passwordValidator","MatchPassword","crud","root","passworMismatch","pinCodeValidator","trimData","checkInteger","parseFloat","parseInt","isNaN","alphnumericValidator","stringvalidator","disallowspecial","alphValidator","numericValidator","floatNumberValidator","mackAddressValidator","gatewayAddressValidator","ipValidator","domainNameValidator","production","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}